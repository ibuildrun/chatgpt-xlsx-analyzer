(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67034,(e,t,r)=>{var a={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],a=t[1];return(r+a)*3/4-a},t.toByteArray=function(e){var t,r,s=l(e),i=s[0],o=s[1],u=new n((i+o)*3/4-o),c=0,d=o>0?i-4:i;for(r=0;r<d;r+=4)t=a[e.charCodeAt(r)]<<18|a[e.charCodeAt(r+1)]<<12|a[e.charCodeAt(r+2)]<<6|a[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===o&&(t=a[e.charCodeAt(r)]<<2|a[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===o&&(t=a[e.charCodeAt(r)]<<10|a[e.charCodeAt(r+1)]<<4|a[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,a=e.length,n=a%3,s=[],i=0,o=a-n;i<o;i+=16383)s.push(function(e,t,a){for(var n,s=[],i=t;i<a;i+=3)n=(e[i]<<16&0xff0000)+(e[i+1]<<8&65280)+(255&e[i+2]),s.push(r[n>>18&63]+r[n>>12&63]+r[n>>6&63]+r[63&n]);return s.join("")}(e,i,i+16383>o?o:i+16383));return 1===n?s.push(r[(t=e[a-1])>>2]+r[t<<4&63]+"=="):2===n&&s.push(r[(t=(e[a-2]<<8)+e[a-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],a=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=s.length;i<o;++i)r[i]=s[i],a[s.charCodeAt(i)]=i;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var a=r===t?0:4-r%4;return[r,a]}a[45]=62,a[95]=63},72:function(e,t,r){"use strict";var a=r(675),n=r(783),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function i(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var a=e,n=t;if(("string"!=typeof n||""===n)&&(n="utf8"),!o.isEncoding(n))throw TypeError("Unknown encoding: "+n);var s=0|h(a,n),l=i(s),u=l.write(a,n);return u!==s&&(l=l.slice(0,u)),l}if(ArrayBuffer.isView(e))return d(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(I(e,ArrayBuffer)||e&&I(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(I(e,SharedArrayBuffer)||e&&I(e.buffer,SharedArrayBuffer)))return function(e,t,r){var a;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(a=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.prototype),a}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var c=e.valueOf&&e.valueOf();if(null!=c&&c!==e)return o.from(c,t,r);var p=function(e){if(o.isBuffer(e)){var t=0|f(e.length),r=i(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?i(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(p)return p;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),i(e<0?0:0|f(e))}function d(e){for(var t=e.length<0?0:0|f(e.length),r=i(t),a=0;a<t;a+=1)r[a]=255&e[a];return r}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return(u(e),e<=0)?i(e):void 0!==t?"string"==typeof r?i(e).fill(t,r):i(e).fill(t):i(e)},o.allocUnsafe=function(e){return c(e)},o.allocUnsafeSlow=function(e){return c(e)};function f(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function h(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||I(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,a=arguments.length>2&&!0===arguments[2];if(!a&&0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return A(e).length;default:if(n)return a?-1:j(e).length;t=(""+t).toLowerCase(),n=!0}}function p(e,t,r){var n,s,i,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var a=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>a)&&(r=a);for(var n="",s=t;s<r;++s)n+=S[e[s]];return n}(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return function(e,t,r){var a="";r=Math.min(e.length,r);for(var n=t;n<r;++n)a+=String.fromCharCode(127&e[n]);return a}(this,t,r);case"latin1":case"binary":return function(e,t,r){var a="";r=Math.min(e.length,r);for(var n=t;n<r;++n)a+=String.fromCharCode(e[n]);return a}(this,t,r);case"base64":return n=this,s=t,i=r,0===s&&i===n.length?a.fromByteArray(n):a.fromByteArray(n.slice(s,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var a=e.slice(t,r),n="",s=0;s<a.length;s+=2)n+=String.fromCharCode(a[s]+256*a[s+1]);return n}(this,t,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function m(e,t,r){var a=e[t];e[t]=e[r],e[r]=a}function g(e,t,r,a,n){var s;if(0===e.length)return -1;if("string"==typeof r?(a=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(s=r*=1)!=s&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(n)return -1;else r=e.length-1;else if(r<0)if(!n)return -1;else r=0;if("string"==typeof t&&(t=o.from(t,a)),o.isBuffer(t))return 0===t.length?-1:y(e,t,r,a,n);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(n)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return y(e,[t],r,a,n)}throw TypeError("val must be string, number or Buffer")}function y(e,t,r,a,n){var s,i=1,o=e.length,l=t.length;if(void 0!==a&&("ucs2"===(a=String(a).toLowerCase())||"ucs-2"===a||"utf16le"===a||"utf-16le"===a)){if(e.length<2||t.length<2)return -1;i=2,o/=2,l/=2,r/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(n){var c=-1;for(s=r;s<o;s++)if(u(e,s)===u(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===l)return c*i}else -1!==c&&(s-=s-c),c=-1}else for(r+l>o&&(r=o-l),s=r;s>=0;s--){for(var d=!0,f=0;f<l;f++)if(u(e,s+f)!==u(t,f)){d=!1;break}if(d)return s}return -1}o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(I(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),I(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,a=t.length,n=0,s=Math.min(r,a);n<s;++n)if(e[n]!==t[n]){r=e[n],a=t[n];break}return r<a?-1:+(a<r)},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,a=o.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var s=e[r];if(I(s,Uint8Array)&&(s=o.from(s)),!o.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(a,n),n+=s.length}return a},o.byteLength=h,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(e,t,r,a,n){if(I(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===a&&(a=0),void 0===n&&(n=this.length),t<0||r>e.length||a<0||n>this.length)throw RangeError("out of range index");if(a>=n&&t>=r)return 0;if(a>=n)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,a>>>=0,n>>>=0,this===e)return 0;for(var s=n-a,i=r-t,l=Math.min(s,i),u=this.slice(a,n),c=e.slice(t,r),d=0;d<l;++d)if(u[d]!==c[d]){s=u[d],i=c[d];break}return s<i?-1:+(i<s)},o.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)};function v(e,t,r){r=Math.min(e.length,r);for(var a=[],n=t;n<r;){var s,i,o,l,u=e[n],c=null,d=u>239?4:u>223?3:u>191?2:1;if(n+d<=r)switch(d){case 1:u<128&&(c=u);break;case 2:(192&(s=e[n+1]))==128&&(l=(31&u)<<6|63&s)>127&&(c=l);break;case 3:s=e[n+1],i=e[n+2],(192&s)==128&&(192&i)==128&&(l=(15&u)<<12|(63&s)<<6|63&i)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:s=e[n+1],i=e[n+2],o=e[n+3],(192&s)==128&&(192&i)==128&&(192&o)==128&&(l=(15&u)<<18|(63&s)<<12|(63&i)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,a.push(c>>>10&1023|55296),c=56320|1023&c),a.push(c),n+=d}var f=a,h=f.length;if(h<=4096)return String.fromCharCode.apply(String,f);for(var p="",m=0;m<h;)p+=String.fromCharCode.apply(String,f.slice(m,m+=4096));return p}function x(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function b(e,t,r,a,n,s){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw RangeError('"value" argument is out of bounds');if(r+a>e.length)throw RangeError("Index out of range")}function _(e,t,r,a,n,s){if(r+a>e.length||r<0)throw RangeError("Index out of range")}function w(e,t,r,a,s){return t*=1,r>>>=0,s||_(e,t,r,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,r,a,23,4),r+4}function k(e,t,r,a,s){return t*=1,r>>>=0,s||_(e,t,r,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,r,a,52,8),r+8}o.prototype.write=function(e,t,r,a){if(void 0===t)a="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)a=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===a&&(a="utf8")):(a=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n,s,i,o,l,u,c,d,f=this.length-t;if((void 0===r||r>f)&&(r=f),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var h=!1;;)switch(a){case"hex":return function(e,t,r,a){r=Number(r)||0;var n=e.length-r;a?(a=Number(a))>n&&(a=n):a=n;var s=t.length;a>s/2&&(a=s/2);for(var i=0;i<a;++i){var o,l=parseInt(t.substr(2*i,2),16);if((o=l)!=o)break;e[r+i]=l}return i}(this,e,t,r);case"utf8":case"utf-8":return n=t,s=r,T(j(e,this.length-n),this,n,s);case"ascii":return i=t,o=r,T(N(e),this,i,o);case"latin1":case"binary":return function(e,t,r,a){return T(N(t),e,r,a)}(this,e,t,r);case"base64":return l=t,u=r,T(A(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,d=r,T(function(e,t){for(var r,a,n=[],s=0;s<e.length&&!((t-=2)<0);++s)a=(r=e.charCodeAt(s))>>8,n.push(r%256),n.push(a);return n}(e,this.length-c),this,c,d);default:if(h)throw TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),h=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var a=this.subarray(e,t);return Object.setPrototypeOf(a,o.prototype),a},o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);for(var a=this[e],n=1,s=0;++s<t&&(n*=256);)a+=this[e+s]*n;return a},o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);for(var a=this[e+--t],n=1;t>0&&(n*=256);)a+=this[e+--t]*n;return a},o.prototype.readUInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);for(var a=this[e],n=1,s=0;++s<t&&(n*=256);)a+=this[e+s]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*t)),a},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);for(var a=t,n=1,s=this[e+--a];a>0&&(n*=256);)s+=this[e+--a]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},o.prototype.readInt8=function(e,t){return(e>>>=0,t||x(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||x(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||x(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||x(e,4,this.length),n.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||x(e,4,this.length),n.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||x(e,8,this.length),n.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||x(e,8,this.length),n.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,a){if(e*=1,t>>>=0,r>>>=0,!a){var n=Math.pow(2,8*r)-1;b(this,e,t,r,n,0)}var s=1,i=0;for(this[t]=255&e;++i<r&&(s*=256);)this[t+i]=e/s&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,a){if(e*=1,t>>>=0,r>>>=0,!a){var n=Math.pow(2,8*r)-1;b(this,e,t,r,n,0)}var s=r-1,i=1;for(this[t+s]=255&e;--s>=0&&(i*=256);)this[t+s]=e/i&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,a){if(e*=1,t>>>=0,!a){var n=Math.pow(2,8*r-1);b(this,e,t,r,n-1,-n)}var s=0,i=1,o=0;for(this[t]=255&e;++s<r&&(i*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/i|0)-o&255;return t+r},o.prototype.writeIntBE=function(e,t,r,a){if(e*=1,t>>>=0,!a){var n=Math.pow(2,8*r-1);b(this,e,t,r,n-1,-n)}var s=r-1,i=1,o=0;for(this[t+s]=255&e;--s>=0&&(i*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/i|0)-o&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return w(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return w(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,a){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&a<r&&(a=r),a===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(a<0)throw RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-r&&(a=e.length-t+r);var n=a-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,a);else if(this===e&&r<t&&t<a)for(var s=n-1;s>=0;--s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,a),t);return n},o.prototype.fill=function(e,t,r,a){if("string"==typeof e){if("string"==typeof t?(a=t,t=0,r=this.length):"string"==typeof r&&(a=r,r=this.length),void 0!==a&&"string"!=typeof a)throw TypeError("encoding must be a string");if("string"==typeof a&&!o.isEncoding(a))throw TypeError("Unknown encoding: "+a);if(1===e.length){var n,s=e.charCodeAt(0);("utf8"===a&&s<128||"latin1"===a)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{var i=o.isBuffer(e)?e:o.from(e,a),l=i.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=i[n%l]}return this};var E=/[^+/0-9A-Za-z-_]/g;function j(e,t){t=t||1/0;for(var r,a=e.length,n=null,s=[],i=0;i<a;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!n){if(r>56319||i+1===a){(t-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function N(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function A(e){return a.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function T(e,t,r,a){for(var n=0;n<a&&!(n+r>=t.length)&&!(n>=e.length);++n)t[n+r]=e[n];return n}function I(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var S=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var a=16*r,n=0;n<16;++n)t[a+n]=e[r]+e[n];return t}()},783:function(e,t){t.read=function(e,t,r,a,n){var s,i,o=8*n-a-1,l=(1<<o)-1,u=l>>1,c=-7,d=r?n-1:0,f=r?-1:1,h=e[t+d];for(d+=f,s=h&(1<<-c)-1,h>>=-c,c+=o;c>0;s=256*s+e[t+d],d+=f,c-=8);for(i=s&(1<<-c)-1,s>>=-c,c+=a;c>0;i=256*i+e[t+d],d+=f,c-=8);if(0===s)s=1-u;else{if(s===l)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,a),s-=u}return(h?-1:1)*i*Math.pow(2,s-a)},t.write=function(e,t,r,a,n,s){var i,o,l,u=8*s-n-1,c=(1<<u)-1,d=c>>1,f=5960464477539062e-23*(23===n),h=a?0:s-1,p=a?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),i=c):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+d>=1?t+=f/l:t+=f*Math.pow(2,1-d),t*l>=2&&(i++,l/=2),i+d>=c?(o=0,i=c):i+d>=1?(o=(t*l-1)*Math.pow(2,n),i+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,n),i=0));n>=8;e[r+h]=255&o,h+=p,o/=256,n-=8);for(i=i<<n|o,u+=n;u>0;e[r+h]=255&i,h+=p,i/=256,u-=8);e[r+h-p]|=128*m}}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var r=n[e]={exports:{}},i=!0;try{a[e](r,r.exports,s),i=!1}finally{i&&delete n[e]}return r.exports}s.ab="/ROOT/node_modules/next/dist/compiled/buffer/",t.exports=s(72)},82579,(e,t,r)=>{"use strict";var a=e.i(67034);let n=void 0!==a.Buffer,s=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,i=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function o(e,t,r){null==r&&null!==t&&"object"==typeof t&&(r=t,t=void 0),n&&a.Buffer.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let o=JSON.parse(e,t);if(null===o||"object"!=typeof o)return o;let u=r&&r.protoAction||"error",c=r&&r.constructorAction||"error";if("ignore"===u&&"ignore"===c)return o;if("ignore"!==u&&"ignore"!==c){if(!1===s.test(e)&&!1===i.test(e))return o}else if("ignore"!==u&&"ignore"===c){if(!1===s.test(e))return o}else if(!1===i.test(e))return o;return l(o,{protoAction:u,constructorAction:c,safe:r&&r.safe})}function l(e,{protoAction:t="error",constructorAction:r="error",safe:a}={}){let n=[e];for(;n.length;){let e=n;for(let s of(n=[],e)){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(s,"__proto__")){if(!0===a)return null;if("error"===t)throw SyntaxError("Object contains forbidden prototype property");delete s.__proto__}if("ignore"!==r&&Object.prototype.hasOwnProperty.call(s,"constructor")&&Object.prototype.hasOwnProperty.call(s.constructor,"prototype")){if(!0===a)return null;if("error"===r)throw SyntaxError("Object contains forbidden prototype property");delete s.constructor}for(let e in s){let t=s[e];t&&"object"==typeof t&&n.push(t)}}}return e}function u(e,t,r){let a=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return o(e,t,r)}finally{Error.stackTraceLimit=a}}t.exports=u,t.exports.default=u,t.exports.parse=u,t.exports.safeParse=function(e,t){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return o(e,t,{safe:!0})}catch(e){return null}finally{Error.stackTraceLimit=r}},t.exports.scan=l},55838,(e,t,r)=>{"use strict";var a=e.r(71645),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=a.useState,i=a.useEffect,o=a.useLayoutEffect,l=a.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!n(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=s({inst:{value:r,getSnapshot:t}}),n=a[0].inst,c=a[1];return o(function(){n.value=r,n.getSnapshot=t,u(n)&&c({inst:n})},[e,r,t]),i(function(){return u(n)&&c({inst:n}),e(function(){u(n)&&c({inst:n})})},[e]),l(r),r};r.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:c},2239,(e,t,r)=>{"use strict";t.exports=e.r(55838)},61866,(e,t,r)=>{t.exports=function(e,t){let r;if("function"!=typeof e)throw TypeError(`Expected the first argument to be a \`function\`, got \`${typeof e}\`.`);let a=0;return function(...n){clearTimeout(r);let s=Date.now(),i=t-(s-a);i<=0?(a=s,e.apply(this,n)):r=setTimeout(()=>{a=Date.now(),e.apply(this,n)},i)}}},31713,e=>{"use strict";let t,r,a;var n,s,i,o,l,u,c,d,f,h,p,m=e.i(43476),g=e.i(71645);let y=({className:e="",size:t=48})=>(0,m.jsxs)("svg",{width:t,height:t,viewBox:"0 0 48 48",fill:"none",stroke:"currentColor",strokeWidth:"2",className:e,children:[(0,m.jsx)("rect",{x:"8",y:"8",width:"32",height:"32",strokeLinecap:"square"}),(0,m.jsx)("line",{x1:"16",y1:"20",x2:"32",y2:"20"}),(0,m.jsx)("line",{x1:"16",y1:"28",x2:"24",y2:"28"})]}),v=({className:e="",size:t=64})=>(0,m.jsxs)("svg",{width:t,height:t,viewBox:"0 0 64 64",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"square",className:e,children:[(0,m.jsx)("rect",{x:"8",y:"8",width:"48",height:"48"}),(0,m.jsx)("line",{x1:"16",y1:"48",x2:"48",y2:"48"})]}),x=({className:e="",size:t=16})=>(0,m.jsxs)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"square",className:e,children:[(0,m.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"14"}),(0,m.jsx)("line",{x1:"2",y1:"8",x2:"14",y2:"8"})]}),b=({className:e="",size:t=16})=>(0,m.jsx)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"square",className:e,children:(0,m.jsx)("path",{d:"M2 4h12M5 4V2h6v2M6 7v5M10 7v5M4 4l1 10h6l1-10"})}),_=({className:e="",size:t=16})=>(0,m.jsxs)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:e,children:[(0,m.jsx)("circle",{cx:"8",cy:"8",r:"2"}),(0,m.jsx)("path",{d:"M8 1v2M8 13v2M1 8h2M13 8h2M2.5 2.5l1.5 1.5M12 12l1.5 1.5M2.5 13.5l1.5-1.5M12 4l1.5-1.5"})]}),w=({className:e="",size:t=16})=>(0,m.jsxs)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"square",className:e,children:[(0,m.jsx)("rect",{x:"1",y:"1",width:"14",height:"14"}),(0,m.jsx)("line",{x1:"1",y1:"5",x2:"15",y2:"5"}),(0,m.jsx)("line",{x1:"1",y1:"10",x2:"15",y2:"10"}),(0,m.jsx)("line",{x1:"6",y1:"1",x2:"6",y2:"15"}),(0,m.jsx)("line",{x1:"11",y1:"1",x2:"11",y2:"15"})]}),k=({className:e="",size:t=16})=>(0,m.jsx)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"square",className:e,children:(0,m.jsx)("path",{d:"M1 8h14M10 3l5 5-5 5"})}),E=({className:e="",size:t=16})=>(0,m.jsxs)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"square",className:e,children:[(0,m.jsx)("line",{x1:"3",y1:"3",x2:"13",y2:"13"}),(0,m.jsx)("line",{x1:"13",y1:"3",x2:"3",y2:"13"})]}),j=({className:e="",size:t=16})=>(0,m.jsx)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"square",className:e,children:(0,m.jsx)("path",{d:"M2 8l4 4 8-8"})}),N=({className:e="",size:t=16})=>(0,m.jsxs)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"1.5",className:e,children:[(0,m.jsx)("circle",{cx:"5",cy:"8",r:"3"}),(0,m.jsx)("path",{d:"M8 8h7M12 6v4M15 6v4"})]}),A=({className:e="",size:t=16})=>(0,m.jsxs)("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"square",className:e,children:[(0,m.jsx)("line",{x1:"2",y1:"4",x2:"14",y2:"4"}),(0,m.jsx)("line",{x1:"2",y1:"8",x2:"14",y2:"8"}),(0,m.jsx)("line",{x1:"2",y1:"12",x2:"14",y2:"12"})]}),T=({threads:e,activeThreadId:t,onSelectThread:r,onCreateThread:a,onDeleteThread:n,onClose:s,isMobile:i=!1})=>(0,m.jsxs)("aside",{className:"h-full border-r border-black flex flex-col bg-white",children:[(0,m.jsxs)("header",{className:"p-3 md:p-4 border-b border-black",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[(0,m.jsx)("h1",{className:"text-xs font-black uppercase tracking-widest",children:"Threads"}),i&&s&&(0,m.jsx)("button",{onClick:s,className:"md:hidden p-2 hover:bg-gray-100 -mr-2",children:(0,m.jsx)(E,{size:16})})]}),(0,m.jsxs)("button",{onClick:a,className:"w-full bg-black text-white px-4 py-2.5 md:py-2 text-xs font-bold hover:bg-gray-800 transition-colors border border-black flex items-center justify-center gap-2",children:[(0,m.jsx)(x,{size:12}),(0,m.jsx)("span",{children:"NEW THREAD"})]})]}),(0,m.jsxs)("nav",{className:"flex-1 overflow-y-auto",children:[0===e.length&&(0,m.jsx)("div",{className:"p-4 text-[10px] text-gray-400 italic",children:"No threads yet..."}),e.map(e=>(0,m.jsxs)("div",{onClick:()=>r(e.id),className:`p-3 md:p-4 border-b border-black cursor-pointer group transition-colors flex justify-between items-start
              ${t===e.id?"bg-gray-100":"hover:bg-gray-50"}`,children:[(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsxs)("div",{className:"text-[10px] text-gray-500 mb-1",children:["ID: #",e.id.slice(0,8)]}),(0,m.jsx)("div",{className:"text-xs font-bold uppercase truncate",children:e.title})]}),(0,m.jsx)("button",{onClick:t=>{t.stopPropagation(),n(e.id)},className:"opacity-100 md:opacity-0 group-hover:opacity-100 text-[10px] hover:text-red-600 transition-opacity ml-2 p-2 md:p-1",title:"Delete thread",children:(0,m.jsx)(b,{size:14})})]},e.id))]}),(0,m.jsxs)("footer",{className:"p-3 md:p-4 border-t border-black bg-gray-50 text-[8px] text-gray-400 flex flex-col gap-1",children:[(0,m.jsx)("div",{children:"XLSX ANALYZER v1.0.0"}),(0,m.jsx)("div",{children:"STATUS: SYSTEM_READY"})]})]});e.i(47167);var I="vercel.ai.error",S=Symbol.for(I),C=class e extends Error{constructor({name:e,message:t,cause:r}){super(t),this[o]=!0,this.name=e,this.cause=r}static isInstance(t){return e.hasMarker(t,I)}static hasMarker(e,t){let r=Symbol.for(t);return null!=e&&"object"==typeof e&&r in e&&"boolean"==typeof e[r]&&!0===e[r]}};o=S;var O=C;function R(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}Symbol.for("vercel.ai.error.AI_APICallError"),Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError");var P="AI_InvalidArgumentError",Z=`vercel.ai.error.${P}`,M=Symbol.for(Z),L=class extends O{constructor({message:e,cause:t,argument:r}){super({name:P,message:e,cause:t}),this[l]=!0,this.argument=r}static isInstance(e){return O.hasMarker(e,Z)}};l=M,Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError");var D="AI_JSONParseError",$=`vercel.ai.error.${D}`,F=Symbol.for($),B=class extends O{constructor({text:e,cause:t}){super({name:D,message:`JSON parsing failed: Text: ${e}.
Error message: ${R(t)}`,cause:t}),this[u]=!0,this.text=e}static isInstance(e){return O.hasMarker(e,$)}};u=F,Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError");var U="AI_TypeValidationError",z=`vercel.ai.error.${U}`,V=Symbol.for(z),W=class e extends O{constructor({value:e,cause:t}){super({name:U,message:`Type validation failed: Value: ${JSON.stringify(e)}.
Error message: ${R(t)}`,cause:t}),this[c]=!0,this.value=e}static isInstance(e){return O.hasMarker(e,z)}static wrap({value:t,cause:r}){return e.isInstance(r)&&r.value===t?r:new e({value:t,cause:r})}};c=V,Symbol.for("vercel.ai.error.AI_UnsupportedFunctionalityError");var K=e.i(82579),J=(({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:a="-"}={})=>{let n=((e,t=21)=>(r=t)=>{let a="",n=0|r;for(;n--;)a+=e[Math.random()*e.length|0];return a})(r,t);if(null==e)return n;if(r.includes(a))throw new L({argument:"separator",message:`The separator "${a}" must not be part of the alphabet "${r}".`});return t=>`${e}${a}${n(t)}`})(),Y=Symbol.for("vercel.ai.validator");function q({text:e,schema:t}){try{let r=K.default.parse(e);if(null==t)return{success:!0,value:r,rawValue:r};let a=function({value:e,schema:t}){var r;let a="object"==typeof t&&null!==t&&Y in t&&!0===t[Y]&&"validate"in t?t:(r=t,{[Y]:!0,validate:e=>{let t=r.safeParse(e);return t.success?{success:!0,value:t.data}:{success:!1,error:t.error}}});try{if(null==a.validate)return{success:!0,value:e};let t=a.validate(e);if(t.success)return t;return{success:!1,error:W.wrap({value:e,cause:t.error})}}catch(t){return{success:!1,error:W.wrap({value:e,cause:t})}}}({value:r,schema:t});return a.success?{...a,rawValue:r}:a}catch(t){return{success:!1,error:B.isInstance(t)?t:new B({text:e,cause:t})}}}var{btoa:G,atob:H}=globalThis;let X=Symbol("Let zodToJsonSchema decide on which parser to use");function Q(e,t,r,a){a?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function ee(e,t,r,a,n){e[t]=r,Q(e,t,a,n)}let et=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};(n=d||(d={})).assertEqual=e=>{},n.assertIs=function(e){},n.assertNever=function(e){throw Error()},n.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},n.getValidEnumValues=e=>{let t=n.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),r={};for(let a of t)r[a]=e[a];return n.objectValues(r)},n.objectValues=e=>n.objectKeys(e).map(function(t){return e[t]}),n.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},n.find=(e,t)=>{for(let r of e)if(t(r))return r},n.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,n.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},n.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(f||(f={})).mergeShapes=(e,t)=>({...e,...t});let er=d.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ea=e=>{switch(typeof e){case"undefined":return er.undefined;case"string":return er.string;case"number":return Number.isNaN(e)?er.nan:er.number;case"boolean":return er.boolean;case"function":return er.function;case"bigint":return er.bigint;case"symbol":return er.symbol;case"object":if(Array.isArray(e))return er.array;if(null===e)return er.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return er.promise;if("undefined"!=typeof Map&&e instanceof Map)return er.map;if("undefined"!=typeof Set&&e instanceof Set)return er.set;if("undefined"!=typeof Date&&e instanceof Date)return er.date;return er.object;default:return er.unknown}},en=d.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class es extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},a=e=>{for(let n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(a);else if("invalid_return_type"===n.code)a(n.returnTypeError);else if("invalid_arguments"===n.code)a(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,a=0;for(;a<n.path.length;){let r=n.path[a];a===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],a++}}};return a(this),r}static assert(e){if(!(e instanceof es))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,d.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let a of this.issues)if(a.path.length>0){let r=a.path[0];t[r]=t[r]||[],t[r].push(e(a))}else r.push(e(a));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}es.create=e=>new es(e);let ei=(e,t)=>{let r;switch(e.code){case en.invalid_type:r=e.received===er.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case en.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,d.jsonStringifyReplacer)}`;break;case en.unrecognized_keys:r=`Unrecognized key(s) in object: ${d.joinValues(e.keys,", ")}`;break;case en.invalid_union:r="Invalid input";break;case en.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${d.joinValues(e.options)}`;break;case en.invalid_enum_value:r=`Invalid enum value. Expected ${d.joinValues(e.options)}, received '${e.received}'`;break;case en.invalid_arguments:r="Invalid function arguments";break;case en.invalid_return_type:r="Invalid function return type";break;case en.invalid_date:r="Invalid date";break;case en.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:d.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case en.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case en.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case en.custom:r="Invalid input";break;case en.invalid_intersection_types:r="Intersection results could not be merged";break;case en.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case en.not_finite:r="Number must be finite";break;default:r=t.defaultError,d.assertNever(e)}return{message:r}};(s=h||(h={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},s.toString=e=>"string"==typeof e?e:e?.message;let eo=e=>{let{data:t,path:r,errorMaps:a,issueData:n}=e,s=[...r,...n.path||[]],i={...n,path:s};if(void 0!==n.message)return{...n,path:s,message:n.message};let o="";for(let e of a.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...n,path:s,message:o}};function el(e,t){let r=eo({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,ei,void 0].filter(e=>!!e)});e.common.issues.push(r)}class eu{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let a of t){if("aborted"===a.status)return ec;"dirty"===a.status&&e.dirty(),r.push(a.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,a=await e.value;r.push({key:t,value:a})}return eu.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let a of t){let{key:t,value:n}=a;if("aborted"===t.status||"aborted"===n.status)return ec;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==n.value||a.alwaysSet)&&(r[t.value]=n.value)}return{status:e.value,value:r}}}let ec=Object.freeze({status:"aborted"}),ed=e=>({status:"dirty",value:e}),ef=e=>({status:"valid",value:e}),eh=e=>"undefined"!=typeof Promise&&e instanceof Promise;class ep{constructor(e,t,r,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let em=(e,t)=>{if("valid"===t.status)return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new es(e.common.issues);return this._error=t,this._error}}};function eg(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:a,description:n}=e;if(t&&(r||a))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(t,n)=>{let{message:s}=e;return"invalid_enum_value"===t.code?{message:s??n.defaultError}:void 0===n.data?{message:s??a??n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:s??r??n.defaultError}},description:n}}class ey{get description(){return this._def.description}_getType(e){return ea(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ea(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new eu,ctx:{common:e.parent.common,data:e.data,parsedType:ea(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(eh(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ea(e)},a=this._parseSync({data:e,path:r.path,parent:r});return em(r,a)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ea(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return"valid"===r.status?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>"valid"===e.status?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ea(e)},a=this._parse({data:e,path:r.path,parent:r});return em(r,await (eh(a)?a:Promise.resolve(a)))}refine(e,t){return this._refinement((r,a)=>{let n=e(r),s=()=>a.addIssue({code:en.custom,..."string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(r):t});return"undefined"!=typeof Promise&&n instanceof Promise?n.then(e=>!!e||(s(),!1)):!!n||(s(),!1)})}refinement(e,t){return this._refinement((r,a)=>!!e(r)||(a.addIssue("function"==typeof t?t(r,a):t),!1))}_refinement(e){return new te({schema:this,typeName:p.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return tt.create(this,this._def)}nullable(){return tr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eJ.create(this)}promise(){return e7.create(this,this._def)}or(e){return eq.create([this,e],this._def)}and(e){return eX.create(this,e,this._def)}transform(e){return new te({...eg(this._def),schema:this,typeName:p.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ta({...eg(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:p.ZodDefault})}brand(){return new ti({typeName:p.ZodBranded,type:this,...eg(this._def)})}catch(e){return new tn({...eg(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:p.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return to.create(this,e)}readonly(){return tl.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let ev=/^c[^\s-]{8,}$/i,ex=/^[0-9a-z]+$/,eb=/^[0-9A-HJKMNP-TV-Z]{26}$/i,e_=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ew=/^[a-z0-9_-]{21}$/i,ek=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,eE=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ej=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,eN=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,eT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,eI=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,eS=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,eC=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,eO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",eR=RegExp(`^${eO}$`);function eP(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}class eZ extends ey{_parse(e){var r,a,n,s;let i;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==er.string){let t=this._getOrReturnCtx(e);return el(t,{code:en.invalid_type,expected:er.string,received:t.parsedType}),ec}let o=new eu;for(let l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&(el(i=this._getOrReturnCtx(e,i),{code:en.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("max"===l.kind)e.data.length>l.value&&(el(i=this._getOrReturnCtx(e,i),{code:en.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),o.dirty());else if("length"===l.kind){let t=e.data.length>l.value,r=e.data.length<l.value;(t||r)&&(i=this._getOrReturnCtx(e,i),t?el(i,{code:en.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):r&&el(i,{code:en.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),o.dirty())}else if("email"===l.kind)ej.test(e.data)||(el(i=this._getOrReturnCtx(e,i),{validation:"email",code:en.invalid_string,message:l.message}),o.dirty());else if("emoji"===l.kind)t||(t=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),t.test(e.data)||(el(i=this._getOrReturnCtx(e,i),{validation:"emoji",code:en.invalid_string,message:l.message}),o.dirty());else if("uuid"===l.kind)e_.test(e.data)||(el(i=this._getOrReturnCtx(e,i),{validation:"uuid",code:en.invalid_string,message:l.message}),o.dirty());else if("nanoid"===l.kind)ew.test(e.data)||(el(i=this._getOrReturnCtx(e,i),{validation:"nanoid",code:en.invalid_string,message:l.message}),o.dirty());else if("cuid"===l.kind)ev.test(e.data)||(el(i=this._getOrReturnCtx(e,i),{validation:"cuid",code:en.invalid_string,message:l.message}),o.dirty());else if("cuid2"===l.kind)ex.test(e.data)||(el(i=this._getOrReturnCtx(e,i),{validation:"cuid2",code:en.invalid_string,message:l.message}),o.dirty());else if("ulid"===l.kind)eb.test(e.data)||(el(i=this._getOrReturnCtx(e,i),{validation:"ulid",code:en.invalid_string,message:l.message}),o.dirty());else if("url"===l.kind)try{new URL(e.data)}catch{el(i=this._getOrReturnCtx(e,i),{validation:"url",code:en.invalid_string,message:l.message}),o.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||(el(i=this._getOrReturnCtx(e,i),{validation:"regex",code:en.invalid_string,message:l.message}),o.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||(el(i=this._getOrReturnCtx(e,i),{code:en.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),o.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||(el(i=this._getOrReturnCtx(e,i),{code:en.invalid_string,validation:{startsWith:l.value},message:l.message}),o.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||(el(i=this._getOrReturnCtx(e,i),{code:en.invalid_string,validation:{endsWith:l.value},message:l.message}),o.dirty()):"datetime"===l.kind?(function(e){let t=`${eO}T${eP(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)})(l).test(e.data)||(el(i=this._getOrReturnCtx(e,i),{code:en.invalid_string,validation:"datetime",message:l.message}),o.dirty()):"date"===l.kind?eR.test(e.data)||(el(i=this._getOrReturnCtx(e,i),{code:en.invalid_string,validation:"date",message:l.message}),o.dirty()):"time"===l.kind?RegExp(`^${eP(l)}$`).test(e.data)||(el(i=this._getOrReturnCtx(e,i),{code:en.invalid_string,validation:"time",message:l.message}),o.dirty()):"duration"===l.kind?eE.test(e.data)||(el(i=this._getOrReturnCtx(e,i),{validation:"duration",code:en.invalid_string,message:l.message}),o.dirty()):"ip"===l.kind?(r=e.data,!(("v4"===(a=l.version)||!a)&&eN.test(r)||("v6"===a||!a)&&eT.test(r))&&1&&(el(i=this._getOrReturnCtx(e,i),{validation:"ip",code:en.invalid_string,message:l.message}),o.dirty())):"jwt"===l.kind?!function(e,t){if(!ek.test(e))return!1;try{let[r]=e.split(".");if(!r)return!1;let a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(a));if("object"!=typeof n||null===n||"typ"in n&&n?.typ!=="JWT"||!n.alg||t&&n.alg!==t)return!1;return!0}catch{return!1}}(e.data,l.alg)&&(el(i=this._getOrReturnCtx(e,i),{validation:"jwt",code:en.invalid_string,message:l.message}),o.dirty()):"cidr"===l.kind?(n=e.data,!(("v4"===(s=l.version)||!s)&&eA.test(n)||("v6"===s||!s)&&eI.test(n))&&1&&(el(i=this._getOrReturnCtx(e,i),{validation:"cidr",code:en.invalid_string,message:l.message}),o.dirty())):"base64"===l.kind?eS.test(e.data)||(el(i=this._getOrReturnCtx(e,i),{validation:"base64",code:en.invalid_string,message:l.message}),o.dirty()):"base64url"===l.kind?eC.test(e.data)||(el(i=this._getOrReturnCtx(e,i),{validation:"base64url",code:en.invalid_string,message:l.message}),o.dirty()):d.assertNever(l);return{status:o.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:en.invalid_string,...h.errToObj(r)})}_addCheck(e){return new eZ({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...h.errToObj(e)})}url(e){return this._addCheck({kind:"url",...h.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...h.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...h.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...h.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...h.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...h.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...h.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...h.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...h.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...h.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...h.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...h.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...h.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...h.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...h.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...h.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...h.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...h.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...h.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...h.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...h.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...h.errToObj(t)})}nonempty(e){return this.min(1,h.errToObj(e))}trim(){return new eZ({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new eZ({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new eZ({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}eZ.create=e=>new eZ({checks:[],typeName:p.ZodString,coerce:e?.coerce??!1,...eg(e)});class eM extends ey{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==er.number){let t=this._getOrReturnCtx(e);return el(t,{code:en.invalid_type,expected:er.number,received:t.parsedType}),ec}let r=new eu;for(let a of this._def.checks)"int"===a.kind?d.isInteger(e.data)||(el(t=this._getOrReturnCtx(e,t),{code:en.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(el(t=this._getOrReturnCtx(e,t),{code:en.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(el(t=this._getOrReturnCtx(e,t),{code:en.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,n=r>a?r:a;return Number.parseInt(e.toFixed(n).replace(".",""))%Number.parseInt(t.toFixed(n).replace(".",""))/10**n}(e.data,a.value)&&(el(t=this._getOrReturnCtx(e,t),{code:en.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(el(t=this._getOrReturnCtx(e,t),{code:en.not_finite,message:a.message}),r.dirty()):d.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,h.toString(t))}gt(e,t){return this.setLimit("min",e,!1,h.toString(t))}lte(e,t){return this.setLimit("max",e,!0,h.toString(t))}lt(e,t){return this.setLimit("max",e,!1,h.toString(t))}setLimit(e,t,r,a){return new eM({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:h.toString(a)}]})}_addCheck(e){return new eM({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:h.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:h.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:h.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:h.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:h.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:h.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:h.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:h.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:h.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&d.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks)if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;else"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value);return Number.isFinite(t)&&Number.isFinite(e)}}eM.create=e=>new eM({checks:[],typeName:p.ZodNumber,coerce:e?.coerce||!1,...eg(e)});class eL extends ey{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==er.bigint)return this._getInvalidInput(e);let r=new eu;for(let a of this._def.checks)"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(el(t=this._getOrReturnCtx(e,t),{code:en.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(el(t=this._getOrReturnCtx(e,t),{code:en.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(el(t=this._getOrReturnCtx(e,t),{code:en.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):d.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return el(t,{code:en.invalid_type,expected:er.bigint,received:t.parsedType}),ec}gte(e,t){return this.setLimit("min",e,!0,h.toString(t))}gt(e,t){return this.setLimit("min",e,!1,h.toString(t))}lte(e,t){return this.setLimit("max",e,!0,h.toString(t))}lt(e,t){return this.setLimit("max",e,!1,h.toString(t))}setLimit(e,t,r,a){return new eL({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:h.toString(a)}]})}_addCheck(e){return new eL({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:h.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:h.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:h.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:h.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:h.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}eL.create=e=>new eL({checks:[],typeName:p.ZodBigInt,coerce:e?.coerce??!1,...eg(e)});class eD extends ey{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==er.boolean){let t=this._getOrReturnCtx(e);return el(t,{code:en.invalid_type,expected:er.boolean,received:t.parsedType}),ec}return ef(e.data)}}eD.create=e=>new eD({typeName:p.ZodBoolean,coerce:e?.coerce||!1,...eg(e)});class e$ extends ey{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==er.date){let t=this._getOrReturnCtx(e);return el(t,{code:en.invalid_type,expected:er.date,received:t.parsedType}),ec}if(Number.isNaN(e.data.getTime()))return el(this._getOrReturnCtx(e),{code:en.invalid_date}),ec;let r=new eu;for(let a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(el(t=this._getOrReturnCtx(e,t),{code:en.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(el(t=this._getOrReturnCtx(e,t),{code:en.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):d.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new e$({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:h.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:h.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}e$.create=e=>new e$({checks:[],coerce:e?.coerce||!1,typeName:p.ZodDate,...eg(e)});class eF extends ey{_parse(e){if(this._getType(e)!==er.symbol){let t=this._getOrReturnCtx(e);return el(t,{code:en.invalid_type,expected:er.symbol,received:t.parsedType}),ec}return ef(e.data)}}eF.create=e=>new eF({typeName:p.ZodSymbol,...eg(e)});class eB extends ey{_parse(e){if(this._getType(e)!==er.undefined){let t=this._getOrReturnCtx(e);return el(t,{code:en.invalid_type,expected:er.undefined,received:t.parsedType}),ec}return ef(e.data)}}eB.create=e=>new eB({typeName:p.ZodUndefined,...eg(e)});class eU extends ey{_parse(e){if(this._getType(e)!==er.null){let t=this._getOrReturnCtx(e);return el(t,{code:en.invalid_type,expected:er.null,received:t.parsedType}),ec}return ef(e.data)}}eU.create=e=>new eU({typeName:p.ZodNull,...eg(e)});class ez extends ey{constructor(){super(...arguments),this._any=!0}_parse(e){return ef(e.data)}}ez.create=e=>new ez({typeName:p.ZodAny,...eg(e)});class eV extends ey{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ef(e.data)}}eV.create=e=>new eV({typeName:p.ZodUnknown,...eg(e)});class eW extends ey{_parse(e){let t=this._getOrReturnCtx(e);return el(t,{code:en.invalid_type,expected:er.never,received:t.parsedType}),ec}}eW.create=e=>new eW({typeName:p.ZodNever,...eg(e)});class eK extends ey{_parse(e){if(this._getType(e)!==er.undefined){let t=this._getOrReturnCtx(e);return el(t,{code:en.invalid_type,expected:er.void,received:t.parsedType}),ec}return ef(e.data)}}eK.create=e=>new eK({typeName:p.ZodVoid,...eg(e)});class eJ extends ey{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==er.array)return el(t,{code:en.invalid_type,expected:er.array,received:t.parsedType}),ec;if(null!==a.exactLength){let e=t.data.length>a.exactLength.value,n=t.data.length<a.exactLength.value;(e||n)&&(el(t,{code:e?en.too_big:en.too_small,minimum:n?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&(el(t,{code:en.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&(el(t,{code:en.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>a.type._parseAsync(new ep(t,e,t.path,r)))).then(e=>eu.mergeArray(r,e));let n=[...t.data].map((e,r)=>a.type._parseSync(new ep(t,e,t.path,r)));return eu.mergeArray(r,n)}get element(){return this._def.type}min(e,t){return new eJ({...this._def,minLength:{value:e,message:h.toString(t)}})}max(e,t){return new eJ({...this._def,maxLength:{value:e,message:h.toString(t)}})}length(e,t){return new eJ({...this._def,exactLength:{value:e,message:h.toString(t)}})}nonempty(e){return this.min(1,e)}}eJ.create=(e,t)=>new eJ({type:e,minLength:null,maxLength:null,exactLength:null,typeName:p.ZodArray,...eg(t)});class eY extends ey{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=d.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==er.object){let t=this._getOrReturnCtx(e);return el(t,{code:en.invalid_type,expected:er.object,received:t.parsedType}),ec}let{status:t,ctx:r}=this._processInputParams(e),{shape:a,keys:n}=this._getCached(),s=[];if(!(this._def.catchall instanceof eW&&"strip"===this._def.unknownKeys))for(let e in r.data)n.includes(e)||s.push(e);let i=[];for(let e of n){let t=a[e],n=r.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new ep(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof eW){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)i.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(el(r,{code:en.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let a=r.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new ep(r,a,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of i){let r=await t.key,a=await t.value;e.push({key:r,value:a,alwaysSet:t.alwaysSet})}return e}).then(e=>eu.mergeObjectSync(t,e)):eu.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return h.errToObj,new eY({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let a=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:h.errToObj(e).message??a}:{message:a}}}:{}})}strip(){return new eY({...this._def,unknownKeys:"strip"})}passthrough(){return new eY({...this._def,unknownKeys:"passthrough"})}extend(e){return new eY({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new eY({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:p.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new eY({...this._def,catchall:e})}pick(e){let t={};for(let r of d.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new eY({...this._def,shape:()=>t})}omit(e){let t={};for(let r of d.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new eY({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof eY){let r={};for(let a in t.shape){let n=t.shape[a];r[a]=tt.create(e(n))}return new eY({...t._def,shape:()=>r})}if(t instanceof eJ)return new eJ({...t._def,type:e(t.element)});if(t instanceof tt)return tt.create(e(t.unwrap()));if(t instanceof tr)return tr.create(e(t.unwrap()));if(t instanceof eQ)return eQ.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};for(let r of d.objectKeys(this.shape)){let a=this.shape[r];e&&!e[r]?t[r]=a:t[r]=a.optional()}return new eY({...this._def,shape:()=>t})}required(e){let t={};for(let r of d.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof tt;)e=e._def.innerType;t[r]=e}return new eY({...this._def,shape:()=>t})}keyof(){return e3(d.objectKeys(this.shape))}}eY.create=(e,t)=>new eY({shape:()=>e,unknownKeys:"strip",catchall:eW.create(),typeName:p.ZodObject,...eg(t)}),eY.strictCreate=(e,t)=>new eY({shape:()=>e,unknownKeys:"strict",catchall:eW.create(),typeName:p.ZodObject,...eg(t)}),eY.lazycreate=(e,t)=>new eY({shape:e,unknownKeys:"strip",catchall:eW.create(),typeName:p.ZodObject,...eg(t)});class eq extends ey{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new es(e.ctx.common.issues));return el(t,{code:en.invalid_union,unionErrors:r}),ec});{let e,a=[];for(let n of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&a.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let n=a.map(e=>new es(e));return el(t,{code:en.invalid_union,unionErrors:n}),ec}}get options(){return this._def.options}}eq.create=(e,t)=>new eq({options:e,typeName:p.ZodUnion,...eg(t)});let eG=e=>{if(e instanceof e5)return eG(e.schema);if(e instanceof te)return eG(e.innerType());if(e instanceof e6)return[e.value];if(e instanceof e8)return e.options;if(e instanceof e9)return d.objectValues(e.enum);else if(e instanceof ta)return eG(e._def.innerType);else if(e instanceof eB)return[void 0];else if(e instanceof eU)return[null];else if(e instanceof tt)return[void 0,...eG(e.unwrap())];else if(e instanceof tr)return[null,...eG(e.unwrap())];else if(e instanceof ti)return eG(e.unwrap());else if(e instanceof tl)return eG(e.unwrap());else if(e instanceof tn)return eG(e._def.innerType);else return[]};class eH extends ey{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==er.object)return el(t,{code:en.invalid_type,expected:er.object,received:t.parsedType}),ec;let r=this.discriminator,a=t.data[r],n=this.optionsMap.get(a);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(el(t,{code:en.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ec)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let a=new Map;for(let r of t){let t=eG(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let n of t){if(a.has(n))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);a.set(n,r)}}return new eH({typeName:p.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...eg(r)})}}class eX extends ey{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=(e,a)=>{if("aborted"===e.status||"aborted"===a.status)return ec;let n=function e(t,r){let a=ea(t),n=ea(r);if(t===r)return{valid:!0,data:t};if(a===er.object&&n===er.object){let a=d.objectKeys(r),n=d.objectKeys(t).filter(e=>-1!==a.indexOf(e)),s={...t,...r};for(let a of n){let n=e(t[a],r[a]);if(!n.valid)return{valid:!1};s[a]=n.data}return{valid:!0,data:s}}if(a===er.array&&n===er.array){if(t.length!==r.length)return{valid:!1};let a=[];for(let n=0;n<t.length;n++){let s=e(t[n],r[n]);if(!s.valid)return{valid:!1};a.push(s.data)}return{valid:!0,data:a}}if(a===er.date&&n===er.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,a.value);return n.valid?(("dirty"===e.status||"dirty"===a.status)&&t.dirty(),{status:t.value,value:n.data}):(el(r,{code:en.invalid_intersection_types}),ec)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>a(e,t)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}eX.create=(e,t,r)=>new eX({left:e,right:t,typeName:p.ZodIntersection,...eg(r)});class eQ extends ey{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==er.array)return el(r,{code:en.invalid_type,expected:er.array,received:r.parsedType}),ec;if(r.data.length<this._def.items.length)return el(r,{code:en.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ec;!this._def.rest&&r.data.length>this._def.items.length&&(el(r,{code:en.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let a=[...r.data].map((e,t)=>{let a=this._def.items[t]||this._def.rest;return a?a._parse(new ep(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(a).then(e=>eu.mergeArray(t,e)):eu.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new eQ({...this._def,rest:e})}}eQ.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new eQ({items:e,typeName:p.ZodTuple,rest:null,...eg(t)})};class e0 extends ey{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==er.object)return el(r,{code:en.invalid_type,expected:er.object,received:r.parsedType}),ec;let a=[],n=this._def.keyType,s=this._def.valueType;for(let e in r.data)a.push({key:n._parse(new ep(r,e,r.path,e)),value:s._parse(new ep(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?eu.mergeObjectAsync(t,a):eu.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,r){return new e0(t instanceof ey?{keyType:e,valueType:t,typeName:p.ZodRecord,...eg(r)}:{keyType:eZ.create(),valueType:e,typeName:p.ZodRecord,...eg(t)})}}class e1 extends ey{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==er.map)return el(r,{code:en.invalid_type,expected:er.map,received:r.parsedType}),ec;let a=this._def.keyType,n=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:a._parse(new ep(r,e,r.path,[s,"key"])),value:n._parse(new ep(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let a=await r.key,n=await r.value;if("aborted"===a.status||"aborted"===n.status)return ec;("dirty"===a.status||"dirty"===n.status)&&t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let a=r.key,n=r.value;if("aborted"===a.status||"aborted"===n.status)return ec;("dirty"===a.status||"dirty"===n.status)&&t.dirty(),e.set(a.value,n.value)}return{status:t.value,value:e}}}}e1.create=(e,t,r)=>new e1({valueType:t,keyType:e,typeName:p.ZodMap,...eg(r)});class e2 extends ey{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==er.set)return el(r,{code:en.invalid_type,expected:er.set,received:r.parsedType}),ec;let a=this._def;null!==a.minSize&&r.data.size<a.minSize.value&&(el(r,{code:en.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&r.data.size>a.maxSize.value&&(el(r,{code:en.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());let n=this._def.valueType;function s(e){let r=new Set;for(let a of e){if("aborted"===a.status)return ec;"dirty"===a.status&&t.dirty(),r.add(a.value)}return{status:t.value,value:r}}let i=[...r.data.values()].map((e,t)=>n._parse(new ep(r,e,r.path,t)));return r.common.async?Promise.all(i).then(e=>s(e)):s(i)}min(e,t){return new e2({...this._def,minSize:{value:e,message:h.toString(t)}})}max(e,t){return new e2({...this._def,maxSize:{value:e,message:h.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}e2.create=(e,t)=>new e2({valueType:e,minSize:null,maxSize:null,typeName:p.ZodSet,...eg(t)});class e4 extends ey{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==er.function)return el(t,{code:en.invalid_type,expected:er.function,received:t.parsedType}),ec;function r(e,r){return eo({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ei,ei].filter(e=>!!e),issueData:{code:en.invalid_arguments,argumentsError:r}})}function a(e,r){return eo({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ei,ei].filter(e=>!!e),issueData:{code:en.invalid_return_type,returnTypeError:r}})}let n={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof e7){let e=this;return ef(async function(...t){let i=new es([]),o=await e._def.args.parseAsync(t,n).catch(e=>{throw i.addIssue(r(t,e)),i}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,n).catch(e=>{throw i.addIssue(a(l,e)),i})})}{let e=this;return ef(function(...t){let i=e._def.args.safeParse(t,n);if(!i.success)throw new es([r(t,i.error)]);let o=Reflect.apply(s,this,i.data),l=e._def.returns.safeParse(o,n);if(!l.success)throw new es([a(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new e4({...this._def,args:eQ.create(e).rest(eV.create())})}returns(e){return new e4({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new e4({args:e||eQ.create([]).rest(eV.create()),returns:t||eV.create(),typeName:p.ZodFunction,...eg(r)})}}class e5 extends ey{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}e5.create=(e,t)=>new e5({getter:e,typeName:p.ZodLazy,...eg(t)});class e6 extends ey{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return el(t,{received:t.data,code:en.invalid_literal,expected:this._def.value}),ec}return{status:"valid",value:e.data}}get value(){return this._def.value}}function e3(e,t){return new e8({values:e,typeName:p.ZodEnum,...eg(t)})}e6.create=(e,t)=>new e6({value:e,typeName:p.ZodLiteral,...eg(t)});class e8 extends ey{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return el(t,{expected:d.joinValues(r),received:t.parsedType,code:en.invalid_type}),ec}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return el(t,{received:t.data,code:en.invalid_enum_value,options:r}),ec}return ef(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return e8.create(e,{...this._def,...t})}exclude(e,t=this._def){return e8.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}e8.create=e3;class e9 extends ey{_parse(e){let t=d.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==er.string&&r.parsedType!==er.number){let e=d.objectValues(t);return el(r,{expected:d.joinValues(e),received:r.parsedType,code:en.invalid_type}),ec}if(this._cache||(this._cache=new Set(d.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=d.objectValues(t);return el(r,{received:r.data,code:en.invalid_enum_value,options:e}),ec}return ef(e.data)}get enum(){return this._def.values}}e9.create=(e,t)=>new e9({values:e,typeName:p.ZodNativeEnum,...eg(t)});class e7 extends ey{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==er.promise&&!1===t.common.async?(el(t,{code:en.invalid_type,expected:er.promise,received:t.parsedType}),ec):ef((t.parsedType===er.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}e7.create=(e,t)=>new e7({type:e,typeName:p.ZodPromise,...eg(t)});class te extends ey{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===p.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),a=this._def.effect||null,n={addIssue:e=>{el(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===a.type){let e=a.transform(r.data,n);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return ec;let a=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===a.status?ec:"dirty"===a.status||"dirty"===t.value?ed(a.value):a});{if("aborted"===t.value)return ec;let a=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===a.status?ec:"dirty"===a.status||"dirty"===t.value?ed(a.value):a}}if("refinement"===a.type){let e=e=>{let t=a.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?ec:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===a.status?ec:("dirty"===a.status&&t.dirty(),e(a.value),{status:t.value,value:a.value})}}if("transform"===a.type)if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>"valid"!==e.status?ec:Promise.resolve(a.transform(e.value,n)).then(e=>({status:t.value,value:e})));else{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if("valid"!==e.status)return ec;let s=a.transform(e.value,n);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}d.assertNever(a)}}te.create=(e,t,r)=>new te({schema:e,typeName:p.ZodEffects,effect:t,...eg(r)}),te.createWithPreprocess=(e,t,r)=>new te({schema:t,effect:{type:"preprocess",transform:e},typeName:p.ZodEffects,...eg(r)});class tt extends ey{_parse(e){return this._getType(e)===er.undefined?ef(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tt.create=(e,t)=>new tt({innerType:e,typeName:p.ZodOptional,...eg(t)});class tr extends ey{_parse(e){return this._getType(e)===er.null?ef(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}tr.create=(e,t)=>new tr({innerType:e,typeName:p.ZodNullable,...eg(t)});class ta extends ey{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===er.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ta.create=(e,t)=>new ta({innerType:e,typeName:p.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...eg(t)});class tn extends ey{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return eh(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new es(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new es(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}tn.create=(e,t)=>new tn({innerType:e,typeName:p.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...eg(t)});class ts extends ey{_parse(e){if(this._getType(e)!==er.nan){let t=this._getOrReturnCtx(e);return el(t,{code:en.invalid_type,expected:er.nan,received:t.parsedType}),ec}return{status:"valid",value:e.data}}}ts.create=e=>new ts({typeName:p.ZodNaN,...eg(e)}),Symbol("zod_brand");class ti extends ey{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class to extends ey{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?ec:"dirty"===e.status?(t.dirty(),ed(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?ec:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new to({in:e,out:t,typeName:p.ZodPipeline})}}class tl extends ey{_parse(e){let t=this._def.innerType._parse(e),r=e=>("valid"===e.status&&(e.value=Object.freeze(e.value)),e);return eh(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function tu(e){if("openAi"!==e.target)return{};let t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?et(t,e.currentPath):t.join("/")}}function tc(e,t){return tC(e.type._def,t)}tl.create=(e,t)=>new tl({innerType:e,typeName:p.ZodReadonly,...eg(t)}),eY.lazycreate,(i=p||(p={})).ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly",eZ.create,eM.create,ts.create,eL.create,eD.create,e$.create,eF.create,eB.create,eU.create,ez.create,eV.create,eW.create,eK.create,eJ.create,eY.create,eY.strictCreate,eq.create,eH.create,eX.create,eQ.create,e0.create,e1.create,e2.create,e4.create,e5.create,e6.create,e8.create,e9.create,e7.create,te.create,tt.create,tr.create,te.createWithPreprocess,to.create;let td=/^[cC][^\s-]{8,}$/,tf=/^[0-9a-z]+$/,th=/^[0-9A-HJKMNP-TV-Z]{26}$/,tp=/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,tm=()=>(void 0===r&&(r=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),r),tg=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ty=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,tv=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,tx=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,tb=/^[a-zA-Z0-9_-]{21}$/,t_=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;function tw(e,t){let r={type:"string"};if(e.checks)for(let a of e.checks)switch(a.kind){case"min":ee(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t);break;case"max":ee(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"email":switch(t.emailStrategy){case"format:email":tj(r,"email",a.message,t);break;case"format:idn-email":tj(r,"idn-email",a.message,t);break;case"pattern:zod":tN(r,tp,a.message,t)}break;case"url":tj(r,"uri",a.message,t);break;case"uuid":tj(r,"uuid",a.message,t);break;case"regex":tN(r,a.regex,a.message,t);break;case"cuid":tN(r,td,a.message,t);break;case"cuid2":tN(r,tf,a.message,t);break;case"startsWith":tN(r,RegExp(`^${tk(a.value,t)}`),a.message,t);break;case"endsWith":tN(r,RegExp(`${tk(a.value,t)}$`),a.message,t);break;case"datetime":tj(r,"date-time",a.message,t);break;case"date":tj(r,"date",a.message,t);break;case"time":tj(r,"time",a.message,t);break;case"duration":tj(r,"duration",a.message,t);break;case"length":ee(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t),ee(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"includes":tN(r,RegExp(tk(a.value,t)),a.message,t);break;case"ip":"v6"!==a.version&&tj(r,"ipv4",a.message,t),"v4"!==a.version&&tj(r,"ipv6",a.message,t);break;case"base64url":tN(r,tx,a.message,t);break;case"jwt":tN(r,t_,a.message,t);break;case"cidr":"v6"!==a.version&&tN(r,tg,a.message,t),"v4"!==a.version&&tN(r,ty,a.message,t);break;case"emoji":tN(r,tm(),a.message,t);break;case"ulid":tN(r,th,a.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":tj(r,"binary",a.message,t);break;case"contentEncoding:base64":ee(r,"contentEncoding","base64",a.message,t);break;case"pattern:zod":tN(r,tv,a.message,t)}break;case"nanoid":tN(r,tb,a.message,t)}return r}function tk(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)tE.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}let tE=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function tj(e,t,r,a){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&a.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):ee(e,"format",t,r,a)}function tN(e,t,r,a){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&a.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:tA(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):ee(e,"pattern",tA(t,a),r,a)}function tA(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;let r={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},a=r.i?e.source.toLowerCase():e.source,n="",s=!1,i=!1,o=!1;for(let e=0;e<a.length;e++){if(s){n+=a[e],s=!1;continue}if(r.i){if(i){if(a[e].match(/[a-z]/)){o?(n+=a[e],n+=`${a[e-2]}-${a[e]}`.toUpperCase(),o=!1):"-"===a[e+1]&&a[e+2]?.match(/[a-z]/)?(n+=a[e],o=!0):n+=`${a[e]}${a[e].toUpperCase()}`;continue}}else if(a[e].match(/[a-z]/)){n+=`[${a[e]}${a[e].toUpperCase()}]`;continue}}if(r.m){if("^"===a[e]){n+=`(^|(?<=[\r
]))`;continue}else if("$"===a[e]){n+=`($|(?=[\r
]))`;continue}}if(r.s&&"."===a[e]){n+=i?`${a[e]}\r
`:`[${a[e]}\r
]`;continue}n+=a[e],"\\"===a[e]?s=!0:i&&"]"===a[e]?i=!1:i||"["!==a[e]||(i=!0)}try{new RegExp(n)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return n}function tT(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===p.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,a)=>({...r,[a]:tC(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",a]})??tu(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};let r={type:"object",additionalProperties:tC(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===p.ZodString&&e.keyType._def.checks?.length){let{type:a,...n}=tw(e.keyType._def,t);return{...r,propertyNames:n}}if(e.keyType?._def.typeName===p.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===p.ZodBranded&&e.keyType._def.type._def.typeName===p.ZodString&&e.keyType._def.type._def.checks?.length){let{type:a,...n}=tc(e.keyType._def,t);return{...r,propertyNames:n}}return r}let tI={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},tS=(e,t)=>{let r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>tC(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0};function tC(e,t,r=!1){let a=t.seen.get(e);if(t.override){let n=t.override?.(e,t,a,r);if(n!==X)return n}if(a&&!r){let e=tO(a,t);if(void 0!==e)return e}let n={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,n);let s=((e,t,r)=>{switch(t){case p.ZodString:return tw(e,r);case p.ZodNumber:let a={type:"number"};if(!e.checks)return a;for(let t of e.checks)switch(t.kind){case"int":a.type="integer",Q(a,"type",t.message,r);break;case"min":"jsonSchema7"===r.target?t.inclusive?ee(a,"minimum",t.value,t.message,r):ee(a,"exclusiveMinimum",t.value,t.message,r):(t.inclusive||(a.exclusiveMinimum=!0),ee(a,"minimum",t.value,t.message,r));break;case"max":"jsonSchema7"===r.target?t.inclusive?ee(a,"maximum",t.value,t.message,r):ee(a,"exclusiveMaximum",t.value,t.message,r):(t.inclusive||(a.exclusiveMaximum=!0),ee(a,"maximum",t.value,t.message,r));break;case"multipleOf":ee(a,"multipleOf",t.value,t.message,r)}return a;case p.ZodObject:return function(e,t){let r="openAi"===t.target,a={type:"object",properties:{}},n=[],s=e.shape();for(let e in s){let i=s[e];if(void 0===i||void 0===i._def)continue;let o=function(e){try{return e.isOptional()}catch{return!0}}(i);o&&r&&("ZodOptional"===i._def.typeName&&(i=i._def.innerType),i.isNullable()||(i=i.nullable()),o=!1);let l=tC(i._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==l&&(a.properties[e]=l,o||n.push(e))}n.length&&(a.required=n);let i=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return tC(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==i&&(a.additionalProperties=i),a}(e,r);case p.ZodBigInt:let n={type:"integer",format:"int64"};if(!e.checks)return n;for(let t of e.checks)switch(t.kind){case"min":"jsonSchema7"===r.target?t.inclusive?ee(n,"minimum",t.value,t.message,r):ee(n,"exclusiveMinimum",t.value,t.message,r):(t.inclusive||(n.exclusiveMinimum=!0),ee(n,"minimum",t.value,t.message,r));break;case"max":"jsonSchema7"===r.target?t.inclusive?ee(n,"maximum",t.value,t.message,r):ee(n,"exclusiveMaximum",t.value,t.message,r):(t.inclusive||(n.exclusiveMaximum=!0),ee(n,"maximum",t.value,t.message,r));break;case"multipleOf":ee(n,"multipleOf",t.value,t.message,r)}return n;case p.ZodBoolean:return{type:"boolean"};case p.ZodDate:return function e(t,r,a){let n=a??r.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((a,n)=>e(t,r,a))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":var s=t,i=r;let o={type:"integer",format:"unix-time"};if("openApi3"===i.target)return o;for(let e of s.checks)switch(e.kind){case"min":ee(o,"minimum",e.value,e.message,i);break;case"max":ee(o,"maximum",e.value,e.message,i)}return o}}(e,r);case p.ZodUndefined:return{not:tu(r)};case p.ZodNull:return"openApi3"===r.target?{enum:["null"],nullable:!0}:{type:"null"};case p.ZodArray:let s;return s={type:"array"},e.type?._def&&e.type?._def?.typeName!==p.ZodAny&&(s.items=tC(e.type._def,{...r,currentPath:[...r.currentPath,"items"]})),e.minLength&&ee(s,"minItems",e.minLength.value,e.minLength.message,r),e.maxLength&&ee(s,"maxItems",e.maxLength.value,e.maxLength.message,r),e.exactLength&&(ee(s,"minItems",e.exactLength.value,e.exactLength.message,r),ee(s,"maxItems",e.exactLength.value,e.exactLength.message,r)),s;case p.ZodUnion:case p.ZodDiscriminatedUnion:if("openApi3"===r.target)return tS(e,r);let i=e.options instanceof Map?Array.from(e.options.values()):e.options;if(i.every(e=>e._def.typeName in tI&&(!e._def.checks||!e._def.checks.length))){let e=i.reduce((e,t)=>{let r=tI[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(i.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){let e=i.reduce((e,t)=>{let r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===i.length){let t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:i.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(i.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:i.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return tS(e,r);case p.ZodIntersection:let o,l,u;return o=[tC(e.left._def,{...r,currentPath:[...r.currentPath,"allOf","0"]}),tC(e.right._def,{...r,currentPath:[...r.currentPath,"allOf","1"]})].filter(e=>!!e),l="jsonSchema2019-09"===r.target?{unevaluatedProperties:!1}:void 0,u=[],o.forEach(e=>{if((!("type"in e)||"string"!==e.type)&&"allOf"in e)u.push(...e.allOf),void 0===e.unevaluatedProperties&&(l=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){let{additionalProperties:r,...a}=e;t=a}else l=void 0;u.push(t)}}),u.length?{allOf:u,...l}:void 0;case p.ZodTuple:return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,t)=>tC(e._def,{...r,currentPath:[...r.currentPath,"items",`${t}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:tC(e.rest._def,{...r,currentPath:[...r.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,t)=>tC(e._def,{...r,currentPath:[...r.currentPath,"items",`${t}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])};case p.ZodRecord:return tT(e,r);case p.ZodLiteral:let c;return"bigint"!=(c=typeof e.value)&&"number"!==c&&"boolean"!==c&&"string"!==c?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===r.target?{type:"bigint"===c?"integer":c,enum:[e.value]}:{type:"bigint"===c?"integer":c,const:e.value};case p.ZodEnum:return{type:"string",enum:Array.from(e.values)};case p.ZodNativeEnum:let d,f,h;return d=e.values,{type:1===(h=Array.from(new Set((f=Object.keys(e.values).filter(e=>"number"!=typeof d[d[e]]).map(e=>d[e])).map(e=>typeof e)))).length?"string"===h[0]?"string":"number":["string","number"],enum:f};case p.ZodNullable:if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===r.target?{type:tI[e.innerType._def.typeName],nullable:!0}:{type:[tI[e.innerType._def.typeName],"null"]};if("openApi3"===r.target){let t=tC(e.innerType._def,{...r,currentPath:[...r.currentPath]});return t&&"$ref"in t?{allOf:[t],nullable:!0}:t&&{...t,nullable:!0}}let m=tC(e.innerType._def,{...r,currentPath:[...r.currentPath,"anyOf","0"]});return m&&{anyOf:[m,{type:"null"}]};case p.ZodOptional:if(r.currentPath.toString()===r.propertyPath?.toString())return tC(e.innerType._def,r);let g=tC(e.innerType._def,{...r,currentPath:[...r.currentPath,"anyOf","1"]});return g?{anyOf:[{not:tu(r)},g]}:tu(r);case p.ZodMap:if("record"===r.mapStrategy)return tT(e,r);return{type:"array",maxItems:125,items:{type:"array",items:[tC(e.keyType._def,{...r,currentPath:[...r.currentPath,"items","items","0"]})||tu(r),tC(e.valueType._def,{...r,currentPath:[...r.currentPath,"items","items","1"]})||tu(r)],minItems:2,maxItems:2}};case p.ZodSet:let y;return y={type:"array",uniqueItems:!0,items:tC(e.valueType._def,{...r,currentPath:[...r.currentPath,"items"]})},e.minSize&&ee(y,"minItems",e.minSize.value,e.minSize.message,r),e.maxSize&&ee(y,"maxItems",e.maxSize.value,e.maxSize.message,r),y;case p.ZodLazy:return()=>e.getter()._def;case p.ZodPromise:return tC(e.type._def,r);case p.ZodNaN:case p.ZodNever:return"openAi"===r.target?void 0:{not:tu({...r,currentPath:[...r.currentPath,"not"]})};case p.ZodEffects:return"input"===r.effectStrategy?tC(e.schema._def,r):tu(r);case p.ZodAny:case p.ZodUnknown:return tu(r);case p.ZodDefault:return{...tC(e.innerType._def,r),default:e.defaultValue()};case p.ZodBranded:return tc(e,r);case p.ZodReadonly:case p.ZodCatch:return tC(e.innerType._def,r);case p.ZodPipeline:if("input"===r.pipeStrategy)return tC(e.in._def,r);if("output"===r.pipeStrategy)return tC(e.out._def,r);let v=tC(e.in._def,{...r,currentPath:[...r.currentPath,"allOf","0"]}),x=tC(e.out._def,{...r,currentPath:[...r.currentPath,"allOf",v?"1":"0"]});return{allOf:[v,x].filter(e=>void 0!==e)};case p.ZodFunction:case p.ZodVoid:case p.ZodSymbol:default:return}})(e,e.typeName,t),i="function"==typeof s?tC(s(),t):s;if(i&&tR(e,t,i),t.postProcess){let r=t.postProcess(i,e,t);return n.jsonSchema=i,r}return n.jsonSchema=i,i}let tO=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:et(t.currentPath,e.path)};case"none":case"seen":if(e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e))return console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),tu(t);return"seen"===t.$refStrategy?tu(t):void 0}},tR=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r);var tP={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},tZ={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},tM={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},tL={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},tD={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},t$=[tP,tZ,tM,tL,tD];tP.code,tZ.code,tM.code,tL.code,tD.code,tP.name,tP.code,tZ.name,tZ.code,tM.name,tM.code,tL.name,tL.code,tD.name,tD.code,t$.map(e=>e.code);var tF=[{code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},{code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},{code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},{code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},{code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},{code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},{code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},{code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},{code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_message" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:NaN}),{type:"finish_message",value:t}}},{code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw Error('"finish_step" parts expect an object with a "finishReason" property.');let t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},{code:"f",name:"start_step",parse:e=>{if(null==e||"object"!=typeof e||!("messageId"in e)||"string"!=typeof e.messageId)throw Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},{code:"g",name:"reasoning",parse:e=>{if("string"!=typeof e)throw Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},{code:"h",name:"source",parse:e=>{if(null==e||"object"!=typeof e)throw Error('"source" parts expect a Source object.');return{type:"source",value:e}}},{code:"i",name:"redacted_reasoning",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data)throw Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},{code:"j",name:"reasoning_signature",parse:e=>{if(null==e||"object"!=typeof e||!("signature"in e)||"string"!=typeof e.signature)throw Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},{code:"k",name:"file",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data||!("mimeType"in e)||"string"!=typeof e.mimeType)throw Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}}],tB=Object.fromEntries(tF.map(e=>[e.code,e]));Object.fromEntries(tF.map(e=>[e.name,e.code]));var tU=tF.map(e=>e.code),tz=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!tU.includes(r))throw Error(`Failed to parse stream string. Invalid code ${r}.`);let a=JSON.parse(e.slice(t+1));return tB[r].parse(a)};async function tV({stream:e,onTextPart:t,onReasoningPart:r,onReasoningSignaturePart:a,onRedactedReasoningPart:n,onSourcePart:s,onFilePart:i,onDataPart:o,onErrorPart:l,onToolCallStreamingStartPart:u,onToolCallDeltaPart:c,onToolCallPart:d,onToolResultPart:f,onMessageAnnotationsPart:h,onFinishMessagePart:p,onFinishStepPart:m,onStartStepPart:g}){let y=e.getReader(),v=new TextDecoder,x=[],b=0;for(;;){let{value:e}=await y.read();if(e&&(x.push(e),b+=e.length,10!==e[e.length-1]))continue;if(0===x.length)break;let _=function(e,t){let r=new Uint8Array(t),a=0;for(let t of e)r.set(t,a),a+=t.length;return e.length=0,r}(x,b);for(let{type:e,value:y}of(b=0,v.decode(_,{stream:!0}).split("\n").filter(e=>""!==e).map(tz)))switch(e){case"text":await (null==t?void 0:t(y));break;case"reasoning":await (null==r?void 0:r(y));break;case"reasoning_signature":await (null==a?void 0:a(y));break;case"redacted_reasoning":await (null==n?void 0:n(y));break;case"file":await (null==i?void 0:i(y));break;case"source":await (null==s?void 0:s(y));break;case"data":await (null==o?void 0:o(y));break;case"error":await (null==l?void 0:l(y));break;case"message_annotations":await (null==h?void 0:h(y));break;case"tool_call_streaming_start":await (null==u?void 0:u(y));break;case"tool_call_delta":await (null==c?void 0:c(y));break;case"tool_call":await (null==d?void 0:d(y));break;case"tool_result":await (null==f?void 0:f(y));break;case"finish_message":await (null==p?void 0:p(y));break;case"finish_step":await (null==m?void 0:m(y));break;case"start_step":await (null==g?void 0:g(y));break;default:throw Error(`Unknown stream part type: ${e}`)}}}async function tW({stream:e,update:t,onToolCall:r,onFinish:a,generateId:n=J,getCurrentDate:s=()=>new Date,lastMessage:i}){var o,l;let u,c,d,f=(null==i?void 0:i.role)==="assistant",h=f?1+(null!=(l=null==(o=i.toolInvocations)?void 0:o.reduce((e,t)=>{var r;return Math.max(e,null!=(r=t.step)?r:0)},0))?l:0):0,p=f?structuredClone(i):{id:n(),createdAt:s(),role:"assistant",content:"",parts:[]};function m(e,t){let r=p.parts.find(t=>"tool-invocation"===t.type&&t.toolInvocation.toolCallId===e);null!=r?r.toolInvocation=t:p.parts.push({type:"tool-invocation",toolInvocation:t})}let g=[],y=f?null==i?void 0:i.annotations:void 0,v={},x={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},b="unknown";function _(){let e=[...g];(null==y?void 0:y.length)&&(p.annotations=y),t({message:{...structuredClone(p),revisionId:n()},data:e,replaceLastMessage:f})}await tV({stream:e,onTextPart(e){null==u?(u={type:"text",text:e},p.parts.push(u)):u.text+=e,p.content+=e,_()},onReasoningPart(e){var t;null==d?(d={type:"text",text:e},null!=c&&c.details.push(d)):d.text+=e,null==c?(c={type:"reasoning",reasoning:e,details:[d]},p.parts.push(c)):c.reasoning+=e,p.reasoning=(null!=(t=p.reasoning)?t:"")+e,_()},onReasoningSignaturePart(e){null!=d&&(d.signature=e.signature)},onRedactedReasoningPart(e){null==c&&(c={type:"reasoning",reasoning:"",details:[]},p.parts.push(c)),c.details.push({type:"redacted",data:e.data}),d=void 0,_()},onFilePart(e){p.parts.push({type:"file",mimeType:e.mimeType,data:e.data}),_()},onSourcePart(e){p.parts.push({type:"source",source:e}),_()},onToolCallStreamingStartPart(e){null==p.toolInvocations&&(p.toolInvocations=[]),v[e.toolCallId]={text:"",step:h,toolName:e.toolName,index:p.toolInvocations.length};let t={state:"partial-call",step:h,toolCallId:e.toolCallId,toolName:e.toolName,args:void 0};p.toolInvocations.push(t),m(e.toolCallId,t),_()},onToolCallDeltaPart(e){let t=v[e.toolCallId];t.text+=e.argsTextDelta;let{value:r}=function(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=q({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=q({text:function(e){let t=["ROOT"],r=-1,a=null;function n(e,n,s){switch(e){case'"':r=n,t.pop(),t.push(s),t.push("INSIDE_STRING");break;case"f":case"t":case"n":r=n,a=n,t.pop(),t.push(s),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(s),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=n,t.pop(),t.push(s),t.push("INSIDE_NUMBER");break;case"{":r=n,t.pop(),t.push(s),t.push("INSIDE_OBJECT_START");break;case"[":r=n,t.pop(),t.push(s),t.push("INSIDE_ARRAY_START")}}function s(e,a){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":r=a,t.pop()}}function i(e,a){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=a,t.pop()}}for(let o=0;o<e.length;o++){let l=e[o];switch(t[t.length-1]){case"ROOT":n(l,o,"FINISH");break;case"INSIDE_OBJECT_START":switch(l){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":r=o,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===l&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===l&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":n(l,o,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":s(l,o);break;case"INSIDE_STRING":switch(l){case'"':t.pop(),r=o;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:r=o}break;case"INSIDE_ARRAY_START":"]"===l?(r=o,t.pop()):(r=o,n(l,o,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(l){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":r=o,t.pop();break;default:r=o}break;case"INSIDE_ARRAY_AFTER_COMMA":n(l,o,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),r=o;break;case"INSIDE_NUMBER":switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=o;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&s(l,o);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&s(l,o);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o);break;default:t.pop()}break;case"INSIDE_LITERAL":{let n=e.substring(a,o+1);"false".startsWith(n)||"true".startsWith(n)||"null".startsWith(n)?r=o:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?s(l,o):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&i(l,o))}}}let o=e.slice(0,r+1);for(let r=t.length-1;r>=0;r--)switch(t[r]){case"INSIDE_STRING":o+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":o+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":o+="]";break;case"INSIDE_LITERAL":{let t=e.substring(a,e.length);"true".startsWith(t)?o+="true".slice(t.length):"false".startsWith(t)?o+="false".slice(t.length):"null".startsWith(t)&&(o+="null".slice(t.length))}}return o}(e)})).success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}(t.text),a={state:"partial-call",step:t.step,toolCallId:e.toolCallId,toolName:t.toolName,args:r};p.toolInvocations[t.index]=a,m(e.toolCallId,a),_()},async onToolCallPart(e){let t={state:"call",step:h,...e};if(null!=v[e.toolCallId]?p.toolInvocations[v[e.toolCallId].index]=t:(null==p.toolInvocations&&(p.toolInvocations=[]),p.toolInvocations.push(t)),m(e.toolCallId,t),_(),r){let t=await r({toolCall:e});if(null!=t){let r={state:"result",step:h,...e,result:t};p.toolInvocations[p.toolInvocations.length-1]=r,m(e.toolCallId,r),_()}}},onToolResultPart(e){let t=p.toolInvocations;if(null==t)throw Error("tool_result must be preceded by a tool_call");let r=t.findIndex(t=>t.toolCallId===e.toolCallId);if(-1===r)throw Error("tool_result must be preceded by a tool_call with the same toolCallId");let a={...t[r],state:"result",...e};t[r]=a,m(e.toolCallId,a),_()},onDataPart(e){g.push(...e),_()},onMessageAnnotationsPart(e){null==y?y=[...e]:y.push(...e),_()},onFinishStepPart(e){h+=1,u=e.isContinued?u:void 0,c=void 0,d=void 0},onStartStepPart(e){f||(p.id=e.messageId),p.parts.push({type:"step-start"}),_()},onFinishMessagePart(e){b=e.finishReason,null!=e.usage&&(x=function({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}(e.usage))},onErrorPart(e){throw Error(e)}}),null==a||a({message:p,finishReason:b,usage:x})}async function tK({stream:e,onTextPart:t}){let r=e.pipeThrough(new TextDecoderStream).getReader();for(;;){let{done:e,value:a}=await r.read();if(e)break;await t(a)}}async function tJ({stream:e,update:t,onFinish:r,getCurrentDate:a=()=>new Date,generateId:n=J}){let s={type:"text",text:""},i={id:n(),createdAt:a(),role:"assistant",content:"",parts:[s]};await tK({stream:e,onTextPart:e=>{i.content+=e,s.text+=e,t({message:{...i},data:[],replaceLastMessage:!1})}}),null==r||r(i,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"})}async function tY({api:e,body:t,streamProtocol:r="data",credentials:a,headers:n,abortController:s,restoreMessagesOnFailure:i,onResponse:o,onUpdate:l,onFinish:u,onToolCall:c,generateId:d,fetch:f=fetch,lastMessage:h,requestType:p="generate"}){var m,g,y;let v="resume"===p?f(`${e}?chatId=${t.id}`,{method:"GET",headers:{"Content-Type":"application/json",...n},signal:null==(m=null==s?void 0:s())?void 0:m.signal,credentials:a}):f(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...n},signal:null==(g=null==s?void 0:s())?void 0:g.signal,credentials:a}),x=await v.catch(e=>{throw i(),e});if(o)try{await o(x)}catch(e){throw e}if(!x.ok)throw i(),Error(null!=(y=await x.text())?y:"Failed to fetch the chat response.");if(!x.body)throw Error("The response body is empty.");switch(r){case"text":return void await tJ({stream:x.body,update:l,onFinish:u,generateId:d});case"data":return void await tW({stream:x.body,update:l,lastMessage:h,onToolCall:c,onFinish({message:e,finishReason:t,usage:r}){u&&null!=e&&u(e,{usage:r,finishReason:t})},generateId:d});default:throw Error(`Unknown stream protocol: ${r}`)}}function tq(e){return null==e?void 0:e.reduce((e,t)=>{var r;return Math.max(e,null!=(r=t.step)?r:0)},0)}function tG(e){var t;return null!=(t=e.parts)?t:[...e.toolInvocations?e.toolInvocations.map(e=>({type:"tool-invocation",toolInvocation:e})):[],...e.reasoning?[{type:"reasoning",reasoning:e.reasoning,details:[{type:"text",text:e.reasoning}]}]:[],...e.content?[{type:"text",text:e.content}]:[]]}function tH(e){return e.map(e=>({...e,parts:tG(e)}))}async function tX(e){if(!e)return[];if(globalThis.FileList&&e instanceof globalThis.FileList)return Promise.all(Array.from(e).map(async e=>{let{name:t,type:r}=e;return{name:t,contentType:r,url:await new Promise((t,r)=>{let a=new FileReader;a.onload=e=>{var r;t(null==(r=e.target)?void 0:r.result)},a.onerror=e=>r(e),a.readAsDataURL(e)})}}));if(Array.isArray(e))return e;throw Error("Invalid attachments type")}function tQ(e){if("assistant"!==e.role)return!1;let t=e.parts.reduce((e,t,r)=>"step-start"===t.type?r:e,-1),r=e.parts.slice(t+1).filter(e=>"tool-invocation"===e.type);return r.length>0&&r.every(e=>"result"in e.toolInvocation)}Symbol.for("vercel.ai.schema");var t0=e.i(2239);e.s(["ERROR_REVALIDATE_EVENT",()=>3,"FOCUS_EVENT",()=>0,"MUTATE_EVENT",()=>2,"RECONNECT_EVENT",()=>1],11671);var t1=Object.prototype.hasOwnProperty;let t2=new WeakMap,t4=()=>{},t5=t4(),t6=Object,t3=e=>e===t5,t8=(e,t)=>({...e,...t}),t9={},t7={},re="undefined",rt=typeof window!=re,rr=typeof document!=re,ra=rt&&"Deno"in window,rn=(e,t)=>{let r=t2.get(e);return[()=>!t3(t)&&e.get(t)||t9,a=>{if(!t3(t)){let n=e.get(t);t in t7||(t7[t]=n),r[5](t,t8(n,a),n||t9)}},r[6],()=>!t3(t)&&t in t7?t7[t]:!t3(t)&&e.get(t)||t9]},rs=!0,[ri,ro]=rt&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[t4,t4],rl={initFocus:e=>(rr&&document.addEventListener("visibilitychange",e),ri("focus",e),()=>{rr&&document.removeEventListener("visibilitychange",e),ro("focus",e)}),initReconnect:e=>{let t=()=>{rs=!0,e()},r=()=>{rs=!1};return ri("online",t),ri("offline",r),()=>{ro("online",t),ro("offline",r)}}},ru=!g.default.useId,rc=!rt||ra,rd=rc?g.useEffect:g.useLayoutEffect,rf="undefined"!=typeof navigator&&navigator.connection,rh=!rc&&rf&&(["slow-2g","2g"].includes(rf.effectiveType)||rf.saveData),rp=new WeakMap,rm=(e,t)=>e===`[object ${t}]`,rg=0,ry=e=>{let t,r,a=typeof e,n=t6.prototype.toString.call(e),s=rm(n,"Date"),i=rm(n,"RegExp"),o=rm(n,"Object");if(t6(e)!==e||s||i)t=s?e.toJSON():"symbol"==a?e.toString():"string"==a?JSON.stringify(e):""+e;else{if(t=rp.get(e))return t;if(t=++rg+"~",rp.set(e,t),Array.isArray(e)){for(r=0,t="@";r<e.length;r++)t+=ry(e[r])+",";rp.set(e,t)}if(o){t="#";let a=t6.keys(e).sort();for(;!t3(r=a.pop());)t3(e[r])||(t+=r+":"+ry(e[r])+",");rp.set(e,t)}}return t},rv=e=>{if("function"==typeof e)try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?ry(e):"",t]},rx=0,rb=()=>++rx;async function r_(...e){let[t,r,a,n]=e,s=t8({populateCache:!0,throwOnError:!0},"boolean"==typeof n?{revalidate:n}:n||{}),i=s.populateCache,o=s.rollbackOnError,l=s.optimisticData,u=s.throwOnError;if("function"==typeof r){let e=[];for(let a of t.keys())!/^\$(inf|sub)\$/.test(a)&&r(t.get(a)._k)&&e.push(a);return Promise.all(e.map(c))}return c(r);async function c(r){let n,[c]=rv(r);if(!c)return;let[d,f]=rn(t,c),[h,p,m,g]=t2.get(t),y=()=>{let e=h[c];return("function"==typeof s.revalidate?s.revalidate(d().data,r):!1!==s.revalidate)&&(delete m[c],delete g[c],e&&e[0])?e[0](2).then(()=>d().data):d().data};if(e.length<3)return y();let v=a,x=!1,b=rb();p[c]=[b,0];let _=!t3(l),w=d(),k=w.data,E=w._c,j=t3(E)?k:E;if(_&&f({data:l="function"==typeof l?l(j,k):l,_c:j}),"function"==typeof v)try{v=v(j)}catch(e){n=e,x=!0}if(v&&"function"==typeof v.then){let e;if(v=await v.catch(e=>{n=e,x=!0}),b!==p[c][0]){if(x)throw n;return v}x&&_&&(e=n,"function"==typeof o?o(e):!1!==o)&&(i=!0,f({data:j,_c:t5}))}if(i&&!x&&("function"==typeof i?f({data:i(v,j),error:t5,_c:t5}):f({data:v,error:t5,_c:t5})),p[c][1]=rb(),Promise.resolve(y()).then(()=>{f({_c:t5})}),x){if(u)throw n;return}return v}}let rw=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},rk=(e,t)=>{if(!t2.has(e)){let r=t8(rl,t),a=Object.create(null),n=r_.bind(t5,e),s=t4,i=Object.create(null),o=(e,t)=>{let r=i[e]||[];return i[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},l=(t,r,a)=>{e.set(t,r);let n=i[t];if(n)for(let e of n)e(r,a)},u=()=>{if(!t2.has(e)&&(t2.set(e,[a,Object.create(null),Object.create(null),Object.create(null),n,l,o]),!rc)){let t=r.initFocus(setTimeout.bind(t5,rw.bind(t5,a,0))),n=r.initReconnect(setTimeout.bind(t5,rw.bind(t5,a,1)));s=()=>{t&&t(),n&&n(),t2.delete(e)}}};return u(),[e,n,u,s]}return[e,t2.get(e)[4]]},[rE,rj]=rk(new Map),rN=t8({onLoadingSlow:t4,onSuccess:t4,onError:t4,onErrorRetry:(e,t,r,a,n)=>{let s=r.errorRetryCount,i=n.retryCount,o=~~((Math.random()+.5)*(1<<(i<8?i:8)))*r.errorRetryInterval;(t3(s)||!(i>s))&&setTimeout(a,o,n)},onDiscarded:t4,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:rh?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:rh?5e3:3e3,compare:function e(t,r){var a,n;if(t===r)return!0;if(t&&r&&(a=t.constructor)===r.constructor){if(a===Date)return t.getTime()===r.getTime();if(a===RegExp)return t.toString()===r.toString();if(a===Array){if((n=t.length)===r.length)for(;n--&&e(t[n],r[n]););return -1===n}if(!a||"object"==typeof t){for(a in n=0,t)if(t1.call(t,a)&&++n&&!t1.call(r,a)||!(a in r)||!e(t[a],r[a]))return!1;return Object.keys(r).length===n}}return t!=t&&r!=r},isPaused:()=>!1,cache:rE,mutate:rj,fallback:{}},{isOnline:()=>rs,isVisible:()=>{let e=rr&&document.visibilityState;return t3(e)||"hidden"!==e}}),rA=(e,t)=>{let r=t8(e,t);if(t){let{use:a,fallback:n}=e,{use:s,fallback:i}=t;a&&s&&(r.use=a.concat(s)),n&&i&&(r.fallback=t8(n,i))}return r},rT=(0,g.createContext)({});var rI=e.i(11671);let rS=rt&&window.__SWR_DEVTOOLS_USE__,rC=(rS?window.__SWR_DEVTOOLS_USE__:[]).concat(e=>(t,r,a)=>{let n=r&&((...e)=>{let[a]=rv(t),[,,,n]=t2.get(rE);if(a.startsWith("$inf$"))return r(...e);let s=n[a];return t3(s)?r(...e):(delete n[a],s)});return e(t,n,a)});rS&&(window.__SWR_DEVTOOLS_REACT__=g.default);let rO=()=>{},rR=rO(),rP=(new WeakMap,g.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}})),rZ={dedupe:!0},rM=Promise.resolve(t5);t6.defineProperty(e=>{let{value:t}=e,r=(0,g.useContext)(rT),a="function"==typeof t,n=(0,g.useMemo)(()=>a?t(r):t,[a,r,t]),s=(0,g.useMemo)(()=>a?n:rA(r,n),[a,r,n]),i=n&&n.provider,o=(0,g.useRef)(t5);i&&!o.current&&(o.current=rk(i(s.cache||rE),n));let l=o.current;return l&&(s.cache=l[0],s.mutate=l[1]),rd(()=>{if(l)return l[2]&&l[2](),l[3]},[]),(0,g.createElement)(rT.Provider,t8(e,{value:s}))},"defaultValue",{value:rN});let rL=(a=(e,t,r)=>{let{cache:a,compare:n,suspense:s,fallbackData:i,revalidateOnMount:o,revalidateIfStale:l,refreshInterval:u,refreshWhenHidden:c,refreshWhenOffline:d,keepPreviousData:f,strictServerPrefetchWarning:h}=r,[p,m,y,v]=t2.get(a),[x,b]=rv(e),_=(0,g.useRef)(!1),w=(0,g.useRef)(!1),k=(0,g.useRef)(x),E=(0,g.useRef)(t),j=(0,g.useRef)(r),N=()=>j.current.isVisible()&&j.current.isOnline(),[A,T,I,S]=rn(a,x),C=(0,g.useRef)({}).current,O=t3(i)?t3(r.fallback)?t5:r.fallback[x]:i,R=(e,t)=>{for(let r in C)if("data"===r){if(!n(e[r],t[r])&&(!t3(e[r])||!n(U,t[r])))return!1}else if(t[r]!==e[r])return!1;return!0},P=(0,g.useMemo)(()=>{let e=!!x&&!!t&&(t3(o)?!j.current.isPaused()&&!s&&!1!==l:o),r=t=>{let r=t8(t);return(delete r._k,e)?{isValidating:!0,isLoading:!0,...r}:r},a=A(),n=S(),i=r(a),u=a===n?i:r(n),c=i;return[()=>{let e=r(A());return R(e,c)?(c.data=e.data,c.isLoading=e.isLoading,c.isValidating=e.isValidating,c.error=e.error,c):(c=e,e)},()=>u]},[a,x]),Z=(0,t0.useSyncExternalStore)((0,g.useCallback)(e=>I(x,(t,r)=>{R(r,t)||e()}),[a,x]),P[0],P[1]),M=!_.current,L=p[x]&&p[x].length>0,D=Z.data,$=t3(D)?O&&"function"==typeof O.then?rP(O):O:D,F=Z.error,B=(0,g.useRef)($),U=f?t3(D)?t3(B.current)?$:B.current:D:$,z=x&&t3($),V=!rc&&(0,t0.useSyncExternalStore)(()=>t4,()=>!1,()=>!0);h&&V&&!s&&z&&console.warn(`Missing pre-initiated data for serialized key "${x}" during server-side rendering. Data fethcing should be initiated on the server and provided to SWR via fallback data. You can set "strictServerPrefetchWarning: false" to disable this warning.`);let W=(!L||!!t3(F))&&(M&&!t3(o)?o:!j.current.isPaused()&&(s?!t3($)&&l:t3($)||l)),K=!!(x&&t&&M&&W),J=t3(Z.isValidating)?K:Z.isValidating,Y=t3(Z.isLoading)?K:Z.isLoading,q=(0,g.useCallback)(async e=>{let t,a,s=E.current;if(!x||!s||w.current||j.current.isPaused())return!1;let i=!0,o=e||{},l=!y[x]||!o.dedupe,u=()=>ru?!w.current&&x===k.current&&_.current:x===k.current,c={isValidating:!1,isLoading:!1},d=()=>{T(c)},f=()=>{let e=y[x];e&&e[1]===a&&delete y[x]},h={isValidating:!0};t3(A().data)&&(h.isLoading=!0);try{if(l&&(T(h),r.loadingTimeout&&t3(A().data)&&setTimeout(()=>{i&&u()&&j.current.onLoadingSlow(x,r)},r.loadingTimeout),y[x]=[s(b),rb()]),[t,a]=y[x],t=await t,l&&setTimeout(f,r.dedupingInterval),!y[x]||y[x][1]!==a)return l&&u()&&j.current.onDiscarded(x),!1;c.error=t5;let e=m[x];if(!t3(e)&&(a<=e[0]||a<=e[1]||0===e[1]))return d(),l&&u()&&j.current.onDiscarded(x),!1;let o=A().data;c.data=n(o,t)?o:t,l&&u()&&j.current.onSuccess(t,x,r)}catch(r){f();let e=j.current,{shouldRetryOnError:t}=e;!e.isPaused()&&(c.error=r,l&&u())&&(e.onError(r,x,e),(!0===t||"function"==typeof t&&t(r))&&(!j.current.revalidateOnFocus||!j.current.revalidateOnReconnect||N())&&e.onErrorRetry(r,x,e,e=>{let t=p[x];t&&t[0]&&t[0](rI.ERROR_REVALIDATE_EVENT,e)},{retryCount:(o.retryCount||0)+1,dedupe:!0}))}return i=!1,d(),!0},[x,a]),G=(0,g.useCallback)((...e)=>r_(a,k.current,...e),[]);if(rd(()=>{E.current=t,j.current=r,t3(D)||(B.current=D)}),rd(()=>{var e;let t;if(!x)return;let r=q.bind(t5,rZ),a=0;j.current.revalidateOnFocus&&(a=Date.now()+j.current.focusThrottleInterval);let n=(e=(e,t={})=>{if(e==rI.FOCUS_EVENT){let e=Date.now();j.current.revalidateOnFocus&&e>a&&N()&&(a=e+j.current.focusThrottleInterval,r())}else if(e==rI.RECONNECT_EVENT)j.current.revalidateOnReconnect&&N()&&r();else if(e==rI.MUTATE_EVENT)return q();else if(e==rI.ERROR_REVALIDATE_EVENT)return q(t)},(t=p[x]||(p[x]=[])).push(e),()=>{let r=t.indexOf(e);r>=0&&(t[r]=t[t.length-1],t.pop())});if(w.current=!1,k.current=x,_.current=!0,T({_k:b}),W&&!y[x])if(t3($)||rc)r();else rt&&typeof window.requestAnimationFrame!=re?window.requestAnimationFrame(r):setTimeout(r,1);return()=>{w.current=!0,n()}},[x]),rd(()=>{let e;function t(){let t="function"==typeof u?u(A().data):u;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!A().error&&(c||j.current.isVisible())&&(d||j.current.isOnline())?q(rZ).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[u,c,d,x]),(0,g.useDebugValue)(U),s){if(!ru&&rc&&z)throw Error("Fallback data is required when using Suspense in SSR.");z&&(E.current=t,j.current=r,w.current=!1);let e=v[x];if(rP(!t3(e)&&z?G(e):rM),!t3(F)&&z)throw F;let a=z?q(rZ):rM;!t3(U)&&z&&(a.status="fulfilled",a.value=!0),rP(a)}return{mutate:G,get data(){return C.data=!0,U},get error(){return C.error=!0,F},get isValidating(){return C.isValidating=!0,J},get isLoading(){return C.isLoading=!0,Y}}},function(...e){let t,r=(t=(0,g.useContext)(rT),(0,g.useMemo)(()=>t8(rN,t),[t])),[n,s,i]="function"==typeof e[1]?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],o=rA(r,i),l=a,{use:u}=o,c=(u||[]).concat(rC);for(let e=c.length;e--;)l=c[e](l);return l(n,s||o.fetcher||null,o)});var rD=e.i(61866);function r$(e,t){return null!=t?(0,rD.default)(e,t):e}var rF=function({api:e="/api/chat",id:t,initialMessages:r,initialInput:a="",sendExtraMessageFields:n,onToolCall:s,experimental_prepareRequestBody:i,maxSteps:o=1,streamProtocol:l="data",onResponse:u,onFinish:c,onError:d,credentials:f,headers:h,body:p,generateId:m=J,fetch:y,keepLastMessageOnError:v=!0,experimental_throttle:x}={}){let[b]=(0,g.useState)(m),_=null!=t?t:b,w="string"==typeof e?[e,_]:_,k=function(e){let[t,r]=(0,g.useState)(e);return(0,g.useEffect)(()=>{!function e(t,r){if(t===r)return!0;if(null==t||null==r)return!1;if("object"!=typeof t&&"object"!=typeof r)return t===r;if(t.constructor!==r.constructor)return!1;if(t instanceof Date&&r instanceof Date)return t.getTime()===r.getTime();if(Array.isArray(t)){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(!e(t[a],r[a]))return!1;return!0}let a=Object.keys(t),n=Object.keys(r);if(a.length!==n.length)return!1;for(let s of a)if(!n.includes(s)||!e(t[s],r[s]))return!1;return!0}(e,t)&&r(e)},[e,t]),t}(null!=r?r:[]),{data:E,mutate:j}=rL([w,"messages"],null,{fallbackData:(0,g.useMemo)(()=>tH(k),[k])}),N=(0,g.useRef)(E||[]);(0,g.useEffect)(()=>{N.current=E||[]},[E]);let{data:A,mutate:T}=rL([w,"streamData"],null),I=(0,g.useRef)(A);(0,g.useEffect)(()=>{I.current=A},[A]);let{data:S="ready",mutate:C}=rL([w,"status"],null),{data:O,mutate:R}=rL([w,"error"],null),P=(0,g.useRef)(null),Z=(0,g.useRef)({credentials:f,headers:h,body:p});(0,g.useEffect)(()=>{Z.current={credentials:f,headers:h,body:p}},[f,h,p]);let M=(0,g.useCallback)(async(t,r="generate")=>{var a,f;C("submitted"),R(void 0);let h=tH(t.messages),p=h.length,g=tq(null==(a=h[h.length-1])?void 0:a.toolInvocations);try{P.current=new AbortController;let a=r$(j,x),o=r$(T,x),d=N.current;a(h,!1);let p=n?h:h.map(({role:e,content:t,experimental_attachments:r,data:a,annotations:n,toolInvocations:s,parts:i})=>({role:e,content:t,...void 0!==r&&{experimental_attachments:r},...void 0!==a&&{data:a},...void 0!==n&&{annotations:n},...void 0!==s&&{toolInvocations:s},...void 0!==i&&{parts:i}})),g=I.current;await tY({api:e,body:null!=(f=null==i?void 0:i({id:_,messages:h,requestData:t.data,requestBody:t.body}))?f:{id:_,messages:p,data:t.data,...Z.current.body,...t.body},streamProtocol:l,credentials:Z.current.credentials,headers:{...Z.current.headers,...t.headers},abortController:()=>P.current,restoreMessagesOnFailure(){v||a(d,!1)},onResponse:u,onUpdate({message:e,data:t,replaceLastMessage:r}){C("streaming"),a([...r?h.slice(0,h.length-1):h,e],!1),(null==t?void 0:t.length)&&o([...null!=g?g:[],...t],!1)},onToolCall:s,onFinish:c,generateId:m,fetch:y,lastMessage:h[h.length-1],requestType:r}),P.current=null,C("ready")}catch(e){if("AbortError"===e.name)return P.current=null,C("ready"),null;d&&e instanceof Error&&d(e),R(e),C("error")}let b=N.current;(function({originalMaxToolInvocationStep:e,originalMessageCount:t,maxSteps:r,messages:a}){var n;let s=a[a.length-1];return r>1&&null!=s&&(a.length>t||tq(s.toolInvocations)!==e)&&tQ(s)&&(null!=(n=tq(s.toolInvocations))?n:0)<r})({originalMaxToolInvocationStep:g,originalMessageCount:p,maxSteps:o,messages:b})&&await M({messages:b})},[j,C,e,Z,u,c,d,R,T,I,l,n,i,s,o,N,P,m,y,v,x,_]),L=(0,g.useCallback)(async(e,{data:t,headers:r,body:a,experimental_attachments:n=e.experimental_attachments}={})=>{var s,i;let o=await tX(n);return M({messages:N.current.concat({...e,id:null!=(s=e.id)?s:m(),createdAt:null!=(i=e.createdAt)?i:new Date,experimental_attachments:o.length>0?o:void 0,parts:tG(e)}),headers:r,body:a,data:t})},[M,m]),D=(0,g.useCallback)(async({data:e,headers:t,body:r}={})=>{let a=N.current;return 0===a.length?null:M({messages:"assistant"===a[a.length-1].role?a.slice(0,-1):a,headers:t,body:r,data:e})},[M]),$=(0,g.useCallback)(()=>{P.current&&(P.current.abort(),P.current=null)},[]),F=(0,g.useCallback)(async()=>{M({messages:N.current},"resume")},[M]),B=(0,g.useCallback)(e=>{"function"==typeof e&&(e=e(N.current));let t=tH(e);j(t,!1),N.current=t},[j]),U=(0,g.useCallback)(e=>{"function"==typeof e&&(e=e(I.current)),T(e,!1),I.current=e},[T]),[z,V]=(0,g.useState)(a),W=(0,g.useCallback)(async(e,t={},r)=>{var a;if(null==(a=null==e?void 0:e.preventDefault)||a.call(e),!z&&!t.allowEmptySubmit)return;r&&(Z.current={...Z.current,...r});let n=await tX(t.experimental_attachments);M({messages:N.current.concat({id:m(),createdAt:new Date,role:"user",content:z,experimental_attachments:n.length>0?n:void 0,parts:[{type:"text",text:z}]}),headers:t.headers,body:t.body,data:t.data}),V("")},[z,m,M]),K=(0,g.useCallback)(({toolCallId:e,result:t})=>{let r=N.current;!function({messages:e,toolCallId:t,toolResult:r}){var a;let n=e[e.length-1],s=n.parts.find(e=>"tool-invocation"===e.type&&e.toolInvocation.toolCallId===t);if(null==s)return;let i={...s.toolInvocation,state:"result",result:r};s.toolInvocation=i,n.toolInvocations=null==(a=n.toolInvocations)?void 0:a.map(e=>e.toolCallId===t?i:e)}({messages:r,toolCallId:e,toolResult:t}),j([...r.slice(0,r.length-1),{...r[r.length-1]}],!1),"submitted"===S||"streaming"===S||tQ(r[r.length-1])&&M({messages:r})},[j,S,M]);return{messages:null!=E?E:[],id:_,setMessages:B,data:A,setData:U,error:O,append:L,reload:D,stop:$,experimental_resume:F,input:z,setInput:V,handleInputChange:e=>{V(e.target.value)},handleSubmit:W,isLoading:"submitted"===S||"streaming"===S,status:S,addToolResult:K}};let rB=({toolCall:e,toolResult:t,onConfirm:r,onOpenSpreadsheet:a})=>{let{id:n,name:s,args:i}=e,o=!!t,l=String(i.sheetName||"Sheet1"),u=i.range?String(i.range):void 0,c=i.cell?String(i.cell):void 0,d=i.message?String(i.message):void 0;switch(s){case"confirmAction":return(0,m.jsxs)("div",{className:"my-2 p-3 border border-yellow-500 bg-yellow-50",children:[(0,m.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-yellow-700 mb-2",children:"CONFIRMATION REQUIRED"}),(0,m.jsx)("div",{className:"text-sm mb-3",children:d||"Confirm this action?"}),o?(0,m.jsx)("div",{className:`text-xs font-bold ${t.result?.confirmed?"text-green-600":"text-red-600"}`,children:t.result?.confirmed?"CONFIRMED":"REJECTED"}):(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsxs)("button",{onClick:()=>r?.(n,!0),className:"flex items-center gap-1 px-3 py-1 bg-green-600 text-white text-xs font-bold hover:bg-green-700 transition-colors",children:[(0,m.jsx)(j,{size:12}),"YES"]}),(0,m.jsxs)("button",{onClick:()=>r?.(n,!1),className:"flex items-center gap-1 px-3 py-1 bg-red-600 text-white text-xs font-bold hover:bg-red-700 transition-colors",children:[(0,m.jsx)(E,{size:12}),"NO"]})]})]});case"openTable":return(0,m.jsxs)("div",{className:"my-2 p-3 border border-blue-500 bg-blue-50",children:[(0,m.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-blue-700 mb-2",children:"SPREADSHEET VIEW"}),(0,m.jsxs)("button",{onClick:()=>a?.(l,u),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white text-xs font-bold hover:bg-blue-700 transition-colors",children:[(0,m.jsx)(w,{size:14}),"Open ",l,u?` (${u})`:""]})]});case"highlightCells":return(0,m.jsxs)("div",{className:"my-2 p-3 border border-purple-500 bg-purple-50",children:[(0,m.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-purple-700 mb-2",children:"HIGHLIGHTED CELLS"}),(0,m.jsxs)("div",{className:"text-sm font-mono",children:[l,"!",u]}),d&&(0,m.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:d}),(0,m.jsx)("button",{onClick:()=>a?.(l,u),className:"mt-2 text-xs text-purple-600 hover:underline",children:"View in spreadsheet"})]});case"getRange":if(t?.result?.cells){let e=t.result.cells;return(0,m.jsxs)("div",{className:"my-2 p-3 border border-gray-300 bg-white",children:[(0,m.jsxs)("div",{className:"text-[10px] uppercase tracking-wider text-gray-500 mb-2",children:["TABLE DATA: ",l,"!",u]}),(0,m.jsx)("div",{className:"overflow-x-auto",children:(0,m.jsx)("table",{className:"text-xs border-collapse",children:(0,m.jsx)("tbody",{children:e.map((e,t)=>(0,m.jsx)("tr",{children:e.map((e,t)=>(0,m.jsx)("td",{className:"border border-gray-300 px-2 py-1 font-mono",children:null!==e.value?String(e.value):""},t))},t))})})}),(0,m.jsx)("button",{onClick:()=>a?.(l,u),className:"mt-2 text-xs text-blue-600 hover:underline",children:"Open in full view"})]})}return(0,m.jsxs)("div",{className:"my-2 p-2 border border-gray-300 bg-gray-50 text-xs",children:[(0,m.jsxs)("span",{className:"font-mono",children:["getRange(",l,", ",u,")"]}),o&&(0,m.jsx)("span",{className:"ml-2 text-green-600",children:"Done"})]});case"updateCell":return(0,m.jsxs)("div",{className:"my-2 p-3 border border-orange-500 bg-orange-50",children:[(0,m.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-orange-700 mb-2",children:"CELL UPDATE"}),(0,m.jsxs)("div",{className:"text-sm font-mono",children:[l,"!",c," = ",JSON.stringify(i.value)]}),o&&(0,m.jsx)("div",{className:`text-xs mt-2 ${t.result?.success?"text-green-600":"text-red-600"}`,children:t.result?.success?"Updated successfully":"Update failed"})]});default:return(0,m.jsxs)("div",{className:"my-2 p-2 border border-gray-300 bg-gray-50 text-xs",children:[(0,m.jsxs)("div",{className:"text-[10px] uppercase tracking-wider text-gray-500 mb-1",children:["TOOL: ",s]}),(0,m.jsx)("pre",{className:"font-mono text-[10px] overflow-x-auto",children:JSON.stringify(i,null,2)}),o&&(0,m.jsx)("div",{className:"mt-2 text-green-600 text-[10px]",children:"Completed"})]})}},rU=({message:e,onToolConfirm:t,onOpenSpreadsheet:r,onMentionClick:a})=>{let n="user"===e.role,s=function(e){let t,r=/@([A-Za-z0-9_]+![A-Z]+\d+(?::[A-Z]+\d+)?)/g,a=[],n=0;for(;null!==(t=r.exec(e));)t.index>n&&a.push(e.slice(n,t.index)),a.push({type:"mention",value:t[1]}),n=t.index+t[0].length;return n<e.length&&a.push(e.slice(n)),a.length>0?a:[e]}(e.content);return(0,m.jsx)("div",{className:`mb-4 ${n?"text-right":"text-left"}`,children:(0,m.jsxs)("div",{className:`inline-block max-w-[80%] text-left ${n?"bg-black text-white":"bg-gray-100 text-black border border-black"}`,children:[(0,m.jsxs)("div",{className:"px-4 py-3",children:[(0,m.jsxs)("div",{className:"text-[10px] opacity-60 mb-1 uppercase tracking-wider",children:[n?"USER":"ASSISTANT"," / ",new Date(e.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})]}),(0,m.jsx)("div",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:s.map((e,t)=>"string"==typeof e?(0,m.jsx)("span",{children:e},t):(0,m.jsxs)("button",{onClick:()=>{let[t,n]=e.value.split("!");a?a(e.value):r&&r(t,n)},className:`font-mono text-xs px-1 py-0.5 mx-0.5 ${n?"bg-white text-black hover:bg-gray-200":"bg-black text-white hover:bg-gray-800"} transition-colors`,children:["@",e.value]},t))})]}),e.toolCalls&&e.toolCalls.length>0&&(0,m.jsx)("div",{className:"border-t border-gray-300 px-4 py-2",children:e.toolCalls.map(a=>{let n=e.toolResults?.find(e=>e.id===a.id);return(0,m.jsx)(rB,{toolCall:a,toolResult:n,onConfirm:t,onOpenSpreadsheet:r},a.id)})})]})})},rz=({value:e,onChange:t,onSend:r,onOpenTable:a,disabled:n=!1,placeholder:s="Type message... [CTRL+ENTER]"})=>{let i=(0,g.useRef)(null);return(0,g.useEffect)(()=>{i.current&&(i.current.style.height="auto",i.current.style.height=`${Math.min(i.current.scrollHeight,150)}px`)},[e]),(0,m.jsx)("form",{onSubmit:t=>{t.preventDefault(),!n&&e.trim()&&r()},className:"p-2 md:p-4 border-t border-black bg-gray-50 safe-bottom",children:(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsxs)("div",{className:"flex-1 relative",children:[(0,m.jsx)("textarea",{ref:i,value:e,onChange:e=>t(e.target.value),onKeyDown:t=>{"Enter"===t.key&&(t.ctrlKey||t.metaKey)&&(t.preventDefault(),!n&&e.trim()&&r())},placeholder:s,disabled:n,className:"w-full bg-white border border-black p-2 md:p-3 text-xs focus:outline-none focus:ring-1 focus:ring-black min-h-[60px] md:min-h-[80px] max-h-[150px] resize-none disabled:bg-gray-100 disabled:cursor-not-allowed"}),(0,m.jsx)("div",{className:"absolute bottom-1.5 md:bottom-2 right-1.5 md:right-2 flex gap-1 md:gap-2",children:a&&(0,m.jsxs)("button",{type:"button",onClick:a,className:"text-[10px] border border-gray-300 px-1.5 md:px-2 py-0.5 bg-gray-100 hover:bg-gray-200 flex items-center gap-1",title:"Open spreadsheet",children:[(0,m.jsx)(w,{size:12}),(0,m.jsx)("span",{className:"hidden sm:inline",children:"GRID"})]})})]}),(0,m.jsxs)("button",{type:"submit",disabled:n||!e.trim(),className:"bg-black text-white px-3 md:px-6 font-bold border border-black hover:bg-gray-800 disabled:bg-gray-300 disabled:border-gray-300 disabled:cursor-not-allowed transition-colors flex items-center gap-1 md:gap-2",children:[(0,m.jsx)(k,{size:14}),(0,m.jsx)("span",{className:"hidden sm:inline",children:"SEND"})]})]})})},rV=({thread:e,initialMessages:t,apiKey:r,onOpenSpreadsheet:a,onMessagesChange:n})=>{let s=(0,g.useRef)(null),[i,o]=(0,g.useState)(null),{messages:l,input:u,setInput:c,handleSubmit:d,isLoading:f,append:h,setMessages:p}=rF({api:"/api/chat",id:e?.id,initialMessages:t.map(e=>({id:e.id,role:e.role,content:e.content,createdAt:new Date(e.createdAt)})),headers:{"x-api-key":r||"","x-thread-id":e?.id||""},onFinish:()=>{n?.()}});(0,g.useEffect)(()=>{p(t.map(e=>({id:e.id,role:e.role,content:e.content,createdAt:new Date(e.createdAt)})))},[e?.id,t,p]),(0,g.useEffect)(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[l]);let y=async(e,t)=>{o(null),await h({role:"user",content:t?`[TOOL_CONFIRMED:${e}] User confirmed the action.`:`[TOOL_REJECTED:${e}] User rejected the action.`})},v=l.map(t=>({id:t.id,threadId:e?.id||"",role:t.role,content:t.content,createdAt:t.createdAt||new Date}));return e?(0,m.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden pt-14 md:pt-0",children:[(0,m.jsx)("header",{className:"p-3 md:p-4 border-b border-black flex items-center",children:(0,m.jsxs)("div",{className:"truncate",children:[(0,m.jsx)("span",{className:"text-[10px] text-gray-500 mr-2",children:"ACTIVE_THREAD:"}),(0,m.jsx)("span",{className:"text-xs font-bold",children:e.title})]})}),(0,m.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 md:p-6 scroll-smooth",ref:s,children:[0===v.length&&(0,m.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-300 opacity-50 space-y-2",children:[(0,m.jsx)("div",{className:"text-3xl md:text-4xl border-2 border-current p-2",children:"_"}),(0,m.jsx)("div",{className:"text-[10px] md:text-xs font-bold tracking-widest",children:"AWAITING_INPUT..."})]}),v.map(e=>(0,m.jsx)(rU,{message:e,onToolConfirm:y,onOpenSpreadsheet:a},e.id)),f&&(0,m.jsx)("div",{className:"text-[10px] text-gray-400 animate-pulse font-bold",children:"AI IS PROCESSING_DATA..."})]}),(0,m.jsx)(rz,{value:u,onChange:c,onSend:e=>{e?.preventDefault(),u.trim()&&r&&d(e)},onOpenTable:()=>a("Sheet1"),disabled:f||!r||!!i,placeholder:r?i?"Waiting for confirmation...":"Type message... [CTRL+ENTER]":"Set API key to chat..."})]}):(0,m.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-6 md:p-12 text-center",children:[(0,m.jsx)("div",{className:"text-6xl md:text-8xl mb-6 md:mb-8 border-4 border-black p-3 md:p-4",children:"_"}),(0,m.jsx)("h2",{className:"text-lg md:text-xl font-bold mb-3 md:mb-4 uppercase tracking-[0.15em] md:tracking-[0.2em]",children:"System Initialized"}),(0,m.jsx)("p",{className:"text-[10px] md:text-xs text-gray-500 mb-6 md:mb-8 max-w-sm leading-relaxed px-4",children:"Welcome to the XLSX Analyzer Terminal. Select an existing thread or create a new session to begin processing spreadsheet data."})]})},rW=({isOpen:e,sheetName:t,initialHighlight:r,onClose:a,onInsertMention:n})=>{let[s,i]=(0,g.useState)(null),[o,l]=(0,g.useState)(!1),[u,c]=(0,g.useState)(null),[d,f]=(0,g.useState)(null),[h,p]=(0,g.useState)(!1),y=(0,g.useCallback)(async()=>{l(!0),c(null);try{let e=await fetch(`/api/xlsx?action=data&sheet=${encodeURIComponent(t)}`);if(!e.ok)throw Error("Failed to load spreadsheet data");let r=await e.json();i(r.data)}catch(e){c(e instanceof Error?e.message:"Unknown error")}finally{l(!1)}},[t]);(0,g.useEffect)(()=>{e&&t&&y()},[e,t,y]);let v=e=>{let t="";for(;e>=0;)t=String.fromCharCode(e%26+65)+t,e=Math.floor(e/26)-1;return t},x=(e,t)=>`${v(t)}${e+1}`,b=()=>{p(!1)};(0,g.useEffect)(()=>(document.addEventListener("mouseup",b),document.addEventListener("touchend",b),()=>{document.removeEventListener("mouseup",b),document.removeEventListener("touchend",b)}),[]);let _=()=>{if(!d)return null;let{start:e,end:t}=d,r=Math.min(e.row,t.row),a=Math.max(e.row,t.row),n=Math.min(e.col,t.col),s=Math.max(e.col,t.col),i=x(r,n),o=x(a,s);return i===o?i:`${i}:${o}`};if(!e)return null;let w=[];if(s)for(let e=0;e<s.rowCount;e++){let t=[];for(let r=0;r<s.colCount;r++){let a=x(e,r);t.push(s.cells[a]||{address:a,value:null})}w.push(t)}return(0,m.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 md:p-4",children:[(0,m.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:a}),(0,m.jsxs)("div",{className:"relative bg-white border-2 md:border-4 border-black w-full max-w-4xl max-h-[90vh] md:max-h-[80vh] flex flex-col",children:[(0,m.jsxs)("div",{className:"p-2 md:p-4 border-b border-black flex flex-col md:flex-row md:items-center justify-between gap-2",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("span",{className:"text-[10px] text-gray-500 mr-2",children:"SHEET:"}),(0,m.jsx)("span",{className:"text-xs md:text-sm font-bold",children:t})]}),(0,m.jsx)("button",{onClick:a,className:"md:hidden p-2 hover:bg-gray-100 transition-colors -mr-1",title:"Close",children:(0,m.jsx)(E,{size:16})})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[d&&(0,m.jsxs)("div",{className:"flex items-center gap-2 flex-1 md:flex-none",children:[(0,m.jsx)("span",{className:"text-[10px] md:text-xs font-mono bg-gray-100 px-2 py-1 border border-gray-300",children:_()}),(0,m.jsxs)("button",{onClick:()=>{let e=_();e&&(n(`@${t}!${e}`),a())},className:"flex items-center gap-1 px-2 md:px-3 py-1.5 md:py-1 bg-black text-white text-[10px] md:text-xs font-bold hover:bg-gray-800 transition-colors flex-1 md:flex-none justify-center",children:[(0,m.jsx)(j,{size:12}),(0,m.jsx)("span",{className:"hidden sm:inline",children:"INSERT"}),(0,m.jsx)("span",{className:"sm:hidden",children:"ADD"})]})]}),(0,m.jsx)("button",{onClick:a,className:"hidden md:block p-1 hover:bg-gray-100 transition-colors",title:"Close",children:(0,m.jsx)(E,{size:16})})]})]}),(0,m.jsxs)("div",{className:"flex-1 overflow-auto p-2 md:p-4",children:[o&&(0,m.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,m.jsx)("div",{className:"text-xs text-gray-500 animate-pulse",children:"LOADING_DATA..."})}),u&&(0,m.jsx)("div",{className:"p-3 md:p-4 bg-red-50 border border-red-500 text-red-700 text-xs md:text-sm",children:u}),s&&!o&&(0,m.jsx)("div",{className:"overflow-auto -mx-2 md:mx-0",children:(0,m.jsxs)("table",{className:"border-collapse text-[10px] md:text-xs select-none",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"border border-gray-300 bg-gray-100 px-1 md:px-2 py-1 w-6 md:w-8 sticky left-0 z-10"}),Array.from({length:s.colCount},(e,t)=>(0,m.jsx)("th",{className:"border border-gray-300 bg-gray-100 px-2 md:px-3 py-1 font-bold text-center min-w-[60px] md:min-w-[80px]",children:v(t)},t))]})}),(0,m.jsx)("tbody",{children:w.map((e,t)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"border border-gray-300 bg-gray-100 px-1 md:px-2 py-1 font-bold text-center sticky left-0 z-10",children:t+1}),e.map((e,r)=>(0,m.jsxs)("td",{onMouseDown:()=>{p(!0),f({start:{row:t,col:r},end:{row:t,col:r}})},onMouseEnter:()=>{h&&d&&f({...d,end:{row:t,col:r}})},onTouchStart:()=>{f({start:{row:t,col:r},end:{row:t,col:r}})},className:`border border-gray-300 px-1 md:px-2 py-1 cursor-cell font-mono whitespace-nowrap ${((e,t)=>{if(!d)return!1;let{start:r,end:a}=d,n=Math.min(r.row,a.row),s=Math.max(r.row,a.row),i=Math.min(r.col,a.col),o=Math.max(r.col,a.col);return e>=n&&e<=s&&t>=i&&t<=o})(t,r)?"bg-blue-100 border-blue-500":"hover:bg-gray-50"}`,children:[null!==e.value?String(e.value):"",e.formula&&(0,m.jsx)("span",{className:"text-[8px] text-gray-400 ml-1 hidden md:inline",title:`=${e.formula}`,children:"fx"})]},r))]},t))})]})})]}),(0,m.jsxs)("div",{className:"p-2 md:p-3 border-t border-black bg-gray-50 text-[9px] md:text-[10px] text-gray-500",children:[(0,m.jsx)("span",{className:"hidden md:inline",children:'Click and drag to select cells. Click "INSERT" to add reference to chat.'}),(0,m.jsx)("span",{className:"md:hidden",children:'Tap cells to select. Tap "ADD" to insert.'})]})]})]})},rK=({isOpen:e,onClose:t,apiKey:r,maskedKey:a,isValid:n,onSave:s,onRemove:i})=>{let[o,l]=(0,g.useState)(""),[u,c]=(0,g.useState)(null);return((0,g.useEffect)(()=>{e&&(l(""),c(null))},[e]),e)?(0,m.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-3 md:p-4",children:[(0,m.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:t}),(0,m.jsx)("div",{className:"relative bg-white border-2 md:border-4 border-black max-w-md w-full",children:(0,m.jsxs)("div",{className:"p-4 md:p-6",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)(N,{size:18}),(0,m.jsx)("h2",{className:"text-xs md:text-sm font-black uppercase tracking-widest",children:"API Key"})]}),(0,m.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 transition-colors -mr-2",children:(0,m.jsx)(E,{size:16})})]}),r&&(0,m.jsxs)("div",{className:"mb-4 md:mb-6 p-3 bg-gray-100 border border-gray-300",children:[(0,m.jsx)("div",{className:"text-[10px] uppercase tracking-wider text-gray-500 mb-1",children:"CURRENT KEY"}),(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsx)("span",{className:"font-mono text-xs md:text-sm",children:a}),(0,m.jsx)("span",{className:`text-[10px] md:text-xs ${n?"text-green-600":"text-red-600"}`,children:n?"VALID":"INVALID"})]})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block text-[10px] uppercase tracking-wider text-gray-500 mb-2",children:r?"REPLACE API KEY":"ENTER API KEY"}),(0,m.jsx)("input",{type:"password",value:o,onChange:e=>{l(e.target.value),c(null)},placeholder:"sk-...",className:"w-full border border-black p-3 text-sm font-mono focus:outline-none focus:ring-1 focus:ring-black"}),u&&(0,m.jsx)("div",{className:"mt-2 text-xs text-red-600",children:u})]}),(0,m.jsxs)("div",{className:"mb-4 md:mb-6 text-[10px] text-gray-500",children:["Your API key is stored locally in your browser. Get your key from"," ",(0,m.jsx)("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-black",children:"OpenAI Platform"})]}),(0,m.jsxs)("div",{className:"flex gap-2 md:gap-3 justify-end",children:[r&&(0,m.jsxs)("button",{onClick:()=>{i(),t()},className:"flex items-center gap-1 md:gap-2 px-3 md:px-4 py-2.5 md:py-2 border border-red-600 text-red-600 text-xs font-bold hover:bg-red-50 transition-colors",children:[(0,m.jsx)(b,{size:12}),(0,m.jsx)("span",{className:"hidden sm:inline",children:"REMOVE"})]}),(0,m.jsxs)("button",{onClick:()=>{let e=o.trim();e?/^sk-[a-zA-Z0-9_-]{20,}$/.test(e)?(s(e),t()):c('Invalid API key format. Should start with "sk-"'):c("API key is required")},disabled:!o.trim(),className:"flex items-center gap-1 md:gap-2 px-4 md:px-4 py-2.5 md:py-2 bg-black text-white text-xs font-bold hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:[(0,m.jsx)(j,{size:12}),"SAVE"]})]})]})})]}):null},rJ=({hasApiKey:e,onClick:t})=>(0,m.jsxs)("div",{className:"flex flex-row items-center gap-2 md:gap-3 flex-nowrap",children:[!e&&(0,m.jsx)("span",{className:"hidden sm:block text-[10px] text-yellow-700 font-bold uppercase tracking-wider whitespace-nowrap",children:"API KEY REQUIRED"}),(0,m.jsxs)("button",{onClick:t,className:`flex flex-row items-center gap-1 md:gap-2 px-2 md:px-3 py-2 text-[10px] md:text-xs font-bold border transition-colors whitespace-nowrap ${e?"border-green-600 text-green-600 hover:bg-green-50":"border-yellow-600 text-yellow-600 hover:bg-yellow-50"}`,title:e?"API key configured":"API key required",children:[e?(0,m.jsx)(N,{size:14}):(0,m.jsx)(_,{size:14}),(0,m.jsx)("span",{children:"KEY"})]})]}),rY="openai-api-key";function rq(){let[e,t]=(0,g.useState)(!1),[r,a]=(0,g.useState)(!1),{threads:n,activeThread:s,activeThreadId:i,messages:o,loading:l,setActiveThreadId:u,createThread:c,deleteThread:d,refreshMessages:f}=function(){let[e,t]=(0,g.useState)([]),[r,a]=(0,g.useState)(null),[n,s]=(0,g.useState)([]),[i,o]=(0,g.useState)(!0),[l,u]=(0,g.useState)(null),c=(0,g.useMemo)(()=>r&&e.length?e.find(e=>e?.id===r)??null:null,[e,r]),d=(0,g.useCallback)(async()=>{o(!0),u(null);let e=new AbortController,r=setTimeout(()=>e.abort(),8e3);try{let a=await fetch("/api/threads",{signal:e.signal});if(clearTimeout(r),!a.ok)throw Error("Failed to load threads");let n=await a.json(),s=(n.data||n.threads||[]).filter(e=>null!=e&&"string"==typeof e.id);t(s)}catch(e){clearTimeout(r),e instanceof Error&&"AbortError"===e.name?(console.warn("Threads fetch timed out, showing empty state"),t([])):u(e instanceof Error?e.message:"Unknown error")}finally{o(!1)}},[]),f=(0,g.useCallback)(async()=>{if(!r)return void s([]);try{let e=await fetch(`/api/messages?threadId=${r}`);if(!e.ok)throw Error("Failed to load messages");let t=await e.json();s(t.messages||[])}catch(e){console.error("Failed to load messages:",e)}},[r]);(0,g.useEffect)(()=>{d()},[d]),(0,g.useEffect)(()=>{f()},[r,f]);let h=(0,g.useCallback)(async()=>{let e=new AbortController,r=setTimeout(()=>e.abort(),1e4);try{let n=await fetch("/api/threads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"New Thread"}),signal:e.signal});if(clearTimeout(r),!n.ok)throw Error("Failed to create thread");let s=await n.json(),i=s.data||s.thread;return t(e=>[i,...e]),a(i.id),i}catch(e){return clearTimeout(r),u(e instanceof Error?e.message:"Unknown error"),null}},[]),p=(0,g.useCallback)(async e=>{try{if(!(await fetch(`/api/threads/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete thread");return t(t=>t.filter(t=>t.id!==e)),r===e&&(a(null),s([])),!0}catch(e){return u(e instanceof Error?e.message:"Unknown error"),!1}},[r]);return{threads:e,activeThread:c,activeThreadId:r,messages:n,loading:i,error:l,setActiveThreadId:a,createThread:h,deleteThread:p,refreshThreads:d,refreshMessages:f}}();(0,g.useEffect)(()=>{if(!l)return void t(!0);let e=setTimeout(()=>{t(!0)},5e3);return()=>clearTimeout(e)},[l]);let{isModalOpen:h,activeSheet:p,highlightRange:x,openSpreadsheet:b,closeSpreadsheet:_}=function(){let[e,t]=(0,g.useState)(!1),[r,a]=(0,g.useState)("Sheet1"),[n,s]=(0,g.useState)(),[i,o]=(0,g.useState)([]),l=(0,g.useCallback)((e="Sheet1",r)=>{a(e),s(r),t(!0)},[]);return{isModalOpen:e,activeSheet:r,highlightRange:n,openSpreadsheet:l,closeSpreadsheet:(0,g.useCallback)(()=>{t(!1),s(void 0)},[]),sheets:i,loadSheets:(0,g.useCallback)(async()=>{try{let e=await fetch("/api/xlsx?action=sheets");if(e.ok){let t=await e.json();o(t.sheets||[])}}catch(e){console.error("Failed to load sheets:",e)}},[])}}(),{apiKey:w,setApiKey:k,removeApiKey:E,isValid:j,maskedKey:N}=function(){let[e,t]=(0,g.useState)(null);(0,g.useEffect)(()=>{let e=localStorage.getItem(rY);e&&t(e)},[]);let r=(0,g.useCallback)(e=>{localStorage.setItem(rY,e),t(e)},[]),a=(0,g.useCallback)(()=>{localStorage.removeItem(rY),t(null)},[]),n=null!==e&&/^sk-[a-zA-Z0-9_-]{20,}$/.test(e),s=e?`${e.slice(0,7)}...${e.slice(-4)}`:null;return{apiKey:e,setApiKey:r,removeApiKey:a,isValid:n,maskedKey:s}}(),[I,S]=(0,g.useState)(!1),[C,O]=(0,g.useState)("");return e?(0,m.jsxs)("div",{className:"flex h-screen w-full overflow-hidden border-2 md:border-4 border-black",children:[r&&(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:()=>a(!1)}),(0,m.jsx)("div",{className:`
        fixed md:relative inset-y-0 left-0 z-50 
        transform transition-transform duration-300 ease-in-out
        ${r?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 md:block
        w-[280px] md:w-1/4 md:min-w-[240px] md:max-w-[320px]
      `,children:(0,m.jsx)(T,{threads:n,activeThreadId:i,onSelectThread:e=>{u(e),a(!1)},onCreateThread:()=>{c(),a(!1)},onDeleteThread:d,onClose:()=>a(!1),isMobile:!0})}),(0,m.jsxs)("main",{className:"flex-1 flex flex-col bg-white overflow-hidden",children:[(0,m.jsxs)("div",{className:"absolute top-2 md:top-6 right-2 md:right-6 left-2 md:left-auto z-10 flex items-center justify-between md:justify-end",children:[(0,m.jsxs)("button",{onClick:()=>a(!0),className:"md:hidden flex items-center gap-2 px-3 py-2 border border-black bg-white text-xs font-bold hover:bg-gray-100",children:[(0,m.jsx)(A,{size:16}),(0,m.jsx)("span",{children:"THREADS"})]}),(0,m.jsx)(rJ,{hasApiKey:!!w&&j,onClick:()=>S(!0)})]}),s?(0,m.jsx)(rV,{thread:s,initialMessages:o,apiKey:w,onOpenSpreadsheet:b,onMessagesChange:f}):(0,m.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-6 md:p-12 text-center",children:[(0,m.jsxs)("div",{className:"mb-6 md:mb-8 border-4 border-black p-3 md:p-4",children:[(0,m.jsx)(v,{size:48,className:"text-black md:hidden"}),(0,m.jsx)(v,{size:64,className:"text-black hidden md:block"})]}),(0,m.jsx)("h2",{className:"text-lg md:text-xl font-bold mb-3 md:mb-4 uppercase tracking-[0.15em] md:tracking-[0.2em]",children:"System Initialized"}),(0,m.jsx)("p",{className:"text-[10px] md:text-xs text-gray-500 mb-6 md:mb-8 max-w-sm leading-relaxed px-4",children:"Welcome to the XLSX Analyzer Terminal. Select an existing thread or create a new session to begin processing spreadsheet data."}),(0,m.jsx)("button",{onClick:()=>{c()},className:"bg-black text-white px-6 md:px-12 py-3 font-bold text-xs md:text-sm border border-black hover:bg-white hover:text-black transition-all",children:"[ NEW_THREAD ]"})]})]}),(0,m.jsx)(rW,{isOpen:h,sheetName:p,initialHighlight:x,onClose:_,onInsertMention:e=>{O(t=>t?`${t} ${e}`:e)}}),(0,m.jsx)(rK,{isOpen:I,onClose:()=>S(!1),apiKey:w,maskedKey:N,isValid:j,onSave:k,onRemove:E})]}):(0,m.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-white border-4 border-black",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("div",{className:"mb-6 animate-pulse flex justify-center",children:(0,m.jsx)(y,{size:64,className:"text-black"})}),(0,m.jsx)("div",{className:"text-xs font-bold uppercase tracking-[0.3em] text-gray-600",children:"INITIALIZING SYSTEM..."})]})})}function rG(){let[e,t]=(0,g.useState)(!1);return((0,g.useEffect)(()=>{t(!0)},[]),e)?(0,m.jsx)(rq,{}):(0,m.jsx)("div",{className:"flex h-screen w-full items-center justify-center bg-white border-4 border-black",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("div",{className:"mb-6 animate-pulse flex justify-center",children:(0,m.jsx)(y,{size:64,className:"text-black"})}),(0,m.jsx)("div",{className:"text-xs font-bold uppercase tracking-[0.3em] text-gray-600",children:"LOADING SYSTEM..."})]})})}e.s(["default",()=>rG],31713)}]);